// each element contains data about the certain poi
// this data is obtained from API
let poiData = [{"name":[{"lang":"he","value":"\u05de\u05d5\u05d6\u05d9\u05d0\u05d5\u05df \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05dc\u05d0\u05de\u05e0\u05d5\u05ea"},{"lang":"en","value":"Tel Aviv Museum of Art"}],"description":[{"lang":"he","value":"The Golda Meir Cultural and Art Center, Sderot Sha'ul HaMelech 27, Tel Aviv-Yafo, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"The Golda Meir Cultural and Art Center, Sderot Sha'ul HaMelech 27, Tel Aviv-Yafo, Israel"}],"address":[{"lang":"he","value":"The Golda Meir Cultural and Art Center, Sderot Sha'ul HaMelech 27, Tel Aviv-Yafo, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"The Golda Meir Cultural and Art Center, Sderot Sha'ul HaMelech 27, Tel Aviv-Yafo, Israel"}],"categoryId":5,"url":"http:\/\/www.tamuseum.org.il\/he\/default.aspx","latitude":"32.0771722","longitude":"34.7860861","coords3d":{"x":"32.0771722","y":"34.7860861","z":0},"distanceToPoint":{"walk":"1241","bike":"2198","drive":"1756"},"timeToPoint":{"walk":"1039","bike":"580","drive":"393"},"phone":"03-607-7020","internationalPhone":"+97236077020","customPhone":"","promotion":[{"name":[{"lang":"he","value":""},{"lang":"en","value":""}],"description":[{"lang":"he","value":""},{"lang":"en","value":""}],"url":"","timeToLive":""}],"googleMapsID":"ChIJpz9FAptLHRURE7h6eDCkS_c"},{"name":[{"lang":"he","value":"\u05d4\u05d0\u05d5\u05e4\u05e8\u05d4 \u05d4\u05d9\u05e9\u05e8\u05d0\u05dc\u05d9\u05ea"},{"lang":"en","value":"The Israeli Opera"}],"description":[{"lang":"he","value":"\u05e9\u05d3\u05e8\u05d5\u05ea \u05e9\u05d0\u05d5\u05dc \u05d4\u05de\u05dc\u05da 19, \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Sderot Sha'ul HaMelech 19, Tel Aviv-Yafo, Israel"}],"address":[{"lang":"he","value":"\u05e9\u05d3\u05e8\u05d5\u05ea \u05e9\u05d0\u05d5\u05dc \u05d4\u05de\u05dc\u05da 19, \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Sderot Sha'ul HaMelech 19, Tel Aviv-Yafo, Israel"}],"categoryId":2,"url":"http:\/\/www.israel-opera.co.il\/","latitude":"32.0762784","longitude":"34.7849475","coords3d":{"x":"32.0762784","y":"34.7849475","z":0},"distanceToPoint":{"walk":"1275","bike":"2232","drive":"1498"},"timeToPoint":{"walk":"1076","bike":"607","drive":"345"},"phone":"03-692-7777","internationalPhone":"+97236927777","customPhone":"","promotion":[{"name":[{"lang":"he","value":""},{"lang":"en","value":""}],"description":[{"lang":"he","value":""},{"lang":"en","value":""}],"url":"","timeToLive":""}],"googleMapsID":"ChIJF8dPS5tLHRURfw7nDQNZpIo"},{"name":[{"lang":"he","value":"\u05d4\u05ea\u05d9\u05d0\u05d8\u05e8\u05d5\u05df \u05d4\u05e7\u05d0\u05de\u05e8\u05d9"},{"lang":"en","value":"Cameri Theater"}],"description":[{"lang":"he","value":"\u05e9\u05d3\u05e8\u05d5\u05ea \u05e9\u05d0\u05d5\u05dc \u05d4\u05de\u05dc\u05da 19, \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Sderot Sha'ul HaMelech 19, Tel Aviv-Yafo, Israel"}],"address":[{"lang":"he","value":"\u05e9\u05d3\u05e8\u05d5\u05ea \u05e9\u05d0\u05d5\u05dc \u05d4\u05de\u05dc\u05da 19, \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Sderot Sha'ul HaMelech 19, Tel Aviv-Yafo, Israel"}],"categoryId":2,"url":"http:\/\/www.cameri.co.il\/","latitude":"32.0767494","longitude":"34.7846172","coords3d":{"x":"32.0767494","y":"34.7846172","z":0},"distanceToPoint":{"walk":"988","bike":"1412","drive":"1542"},"timeToPoint":{"walk":"854","bike":"533","drive":"355"},"phone":"03-606-0900","internationalPhone":"+97236060900","customPhone":"","promotion":[{"name":[{"lang":"he","value":""},{"lang":"en","value":""}],"description":[{"lang":"he","value":""},{"lang":"en","value":""}],"url":"","timeToLive":""}],"googleMapsID":"ChIJF8dPS5tLHRURZA_VUPaQ-mE"},{"name":[{"lang":"he","value":"\u05e0\u05d7\u05de\u05d4 \u05d5\u05d7\u05e6\u05d9"},{"lang":"en","value":"Nehama Vahetzi"}],"description":[{"lang":"he","value":"\u05d0\u05d7\u05d3 \u05d4\u05e2\u05dd 144, \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Ahad Ha'Am St 144, Tel Aviv-Yafo, Israel"}],"address":[{"lang":"he","value":"\u05d0\u05d7\u05d3 \u05d4\u05e2\u05dd 144, \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Ahad Ha'Am St 144, Tel Aviv-Yafo, Israel"}],"categoryId":1,"url":"","latitude":"32.0720562","longitude":"34.7786152","coords3d":{"x":"32.0720562","y":"34.7786152","z":0},"distanceToPoint":{"walk":"1018","bike":"1659","drive":"2436"},"timeToPoint":{"walk":"818","bike":"395","drive":"635"},"phone":"03-685-2326","internationalPhone":"+97236852326","customPhone":"","promotion":[{"name":[{"lang":"he","value":""},{"lang":"en","value":""}],"description":[{"lang":"he","value":""},{"lang":"en","value":""}],"url":"","timeToLive":""}],"googleMapsID":"ChIJNVQ84YFLHRURqzjMQp3RVGY"},{"name":[{"lang":"he","value":"\u05d0\u05dc\u05d5\u05e3 \u05d0\u05dc\u05d1\u05e8\u05d8 \u05de\u05e0\u05d3\u05dc\u05e8"},{"lang":"en","value":"Aluf Albert Mandler Street"}],"description":[{"lang":"he","value":"\u05d0\u05dc\u05d5\u05e3 \u05d0\u05dc\u05d1\u05e8\u05d8 \u05de\u05e0\u05d3\u05dc\u05e8, \u05e8\u05de\u05ea \u05d2\u05df, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Aluf Albert Mandler St, Ramat Gan, Israel"}],"address":[{"lang":"he","value":"\u05d0\u05dc\u05d5\u05e3 \u05d0\u05dc\u05d1\u05e8\u05d8 \u05de\u05e0\u05d3\u05dc\u05e8, \u05e8\u05de\u05ea \u05d2\u05df, \u05d9\u05e9\u05e8\u05d0\u05dc"},{"lang":"en","value":"Aluf Albert Mandler St, Ramat Gan, Israel"}],"categoryId":3,"url":"","latitude":"32.0918002","longitude":"34.8192725","coords3d":{"x":"32.0918002","y":"34.8192725","z":0},"distanceToPoint":{"walk":"4363","bike":"4727","drive":"4703"},"timeToPoint":{"walk":"3530","bike":"1071","drive":"793"},"phone":"","internationalPhone":"","customPhone":"","promotion":[{"name":[{"lang":"he","value":""},{"lang":"en","value":""}],"description":[{"lang":"he","value":""},{"lang":"en","value":""}],"url":"","timeToLive":""}],"googleMapsID":"EilBbHVmIEFsYmVydCBNYW5kbGVyIFN0LCBSYW1hdCBHYW4sIElzcmFlbCIuKiwKFAoSCUVWKdksSh0VERccjfRuTU3jEhQKEgmt5JTnhkwdFRFvUhfnPr8ALQ"}];


// this variable contains all poi categories
let poiCategoriesData  = [{"name":[{"lang":"he","value":"Cafes and Restaurant"},{"lang":"en","value":"Cafes" +
          " and Restaurant"}],"description":[{"lang":"he","value":"Cafes Description"},{"lang":"en","value":"Cafes" +
          " Description"}],"categoryId":"1","color":"#F9F9FA","icon":"Icon1","iconMenu":"IconMenu1","iconCluster":"IconCluster1"},{"name":[{"lang":"he","value":"Theaters"},{"lang":"en","value":"Theaters"}],"description":[{"lang":"he","value":"Theaters Description"},{"lang":"en","value":"Theaters Description"}],"categoryId":"2","color":"#AC7EFA","icon":"Icon2","iconMenu":"IconMenu2","iconCluster":"IconCluster2"},{"name":[{"lang":"he","value":"Transportation"},{"lang":"en","value":"Transportation"}],"description":[{"lang":"he","value":"Transportation Description"},{"lang":"en","value":"Transportation Description"}],"categoryId":"3","color":"#EFFA9C","icon":"Icon3","iconMenu":"IconMenu3","iconCluster":"IconCluster3"},{"name":[{"lang":"he","value":"Pharmacy"},{"lang":"en","value":"Pharmacy"}],"description":[{"lang":"he","value":"Pharmacy Description"},{"lang":"en","value":"Pharmacy Description"}],"categoryId":"4","color":"#00FA19","icon":"Icon4","iconMenu":"IconMenu4","iconCluster":"IconCluster4"},{"name":[{"lang":"he","value":"\u05db\u05dc\u05dc\u05d9"},{"lang":"en","value":"\u05db\u05dc\u05dc\u05d9"}],"description":[{"lang":"he","value":"\u05ea\u05d9\u05d0\u05d5\u05e8 \u05db\u05dc\u05dc\u05d9"},{"lang":"en","value":"\u05ea\u05d9\u05d0\u05d5\u05e8 \u05db\u05dc\u05dc\u05d9"}],"categoryId":"5","color":"#4CD7FA","icon":"Icon5","iconMenu":"IconMenu5","iconCluster":"IconCluster5"}];

const lang = 'en';
const dir = 'ltr';
let canvasClass = 'bmby-poi-wrapp';
let mode = 'dev';
let detectMobile = detect_mobile();
let query = '?key=AIzaSyDuH95F2ljG3Z-AtGByCNYMkaUwwGc-SUc&libraries=places';

let marker_text_color = 'white';
window.markers_poi_array = [];
let gestureHandling = 'cooperative';
let map;
let mapGlobalOption;
let xDown = null;
let yDown = null;

try{
    nonExistentFunction();
} catch (e) {
    if(mode === 'dev'){
        console.log('unable to run callback');
    }
}


poiCategoriesData.forEach(category =>{
    category.data =[];
    poiData.forEach(poi =>{
       if (Number(category.categoryId) === poi.categoryId){
           category.data.push(poi);
       }
    });
});

document.addEventListener("DOMContentLoaded",()=>{
    let scriptInterval;
    addDeviceClass();
    addFont();
    addBasicStyle();
    createScript(hb1,'text/x-handlebars-template','marker-content-template');
    createScript(hb2,'text/x-handlebars-template','exp-map-template');

    scriptInterval = setInterval(()=>{
        addScripts();
        if (scriptsChecker()){
            clearInterval(scriptInterval);
            init_map();
        }
    },200);

});

function get_lang (word) {
    if (lang === 'en'){
        return dictionary[word]['en'];
    } else {
        return dictionary[word]['he'];
    }
}

function addDeviceClass () {
    if (!detectMobile) {
        document.querySelector('body').classList.add('desktop');
    }  else {
        document.querySelector('body').classList.add('mobile');
    }
}

function clearContent(targetContent) {
    if (targetContent.firstChild){
        targetContent.removeChild(targetContent.firstChild);
    }
    // while (targetContent.firstChild) {
    //     targetContent.removeChild(targetContent.firstChild);
    // }
}

function detect_mobile() {
    const a = navigator.userAgent || navigator.vendor || window.opera;
    if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4)))
    {
        return true;

    } else {
        return false;
    }
}

function addBasicStyle () {
    document.head.innerHTML +='<style>'+resetCss+'</style>';
    document.head.innerHTML +='<style>'+styleCss+'</style>';
    document.head.innerHTML +='<style>'+expMapStyle+'</style>';
    document.head.innerHTML +='<style>'+newStyle+'</style>';
    if (window.innerWidth <= 768){
        document.head.innerHTML +='<style>'+mobileStyle+'</style>';
    }
}

function addFont() {
    document.head.innerHTML += '<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;500&display=swap" rel="stylesheet">';
}

function isLoadedScript(path) {
    return document.head.querySelectorAll('[src="' + path + '"]').length > 0;
}

function isLoadedStyle (path) {
    return document.head.querySelectorAll('[href="' + path + '"]').length > 0
}

async function loadScript(path) {
    const script = document.createElement('script');
    script.type ='text/javascript';
    script.src = path;
    script.async =false;
    document.head.appendChild(script);
}

function loadStyle (path) {
    const style = document.createElement('link');
    style.rel='stylesheet';
    style.type ='text/css';
    style.href = path;
    document.head.appendChild(style);
}

function addScripts () {
    const jquery = isLoadedScript('https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js');
    if (!jquery){
        loadScript('https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js');
    }
    const polyfill = isLoadedScript('https://polyfill.io/v3/polyfill.min.js?features=default');
    if (!polyfill){
        loadScript('https://polyfill.io/v3/polyfill.min.js?features=default');
    }
    const clipboard = isLoadedScript('https://cdn.statically.io/gh/zenorocha/clipboard.js/v2.0.4/dist/clipboard.min.js');
    if (!clipboard){
        loadScript('https://cdn.statically.io/gh/zenorocha/clipboard.js/v2.0.4/dist/clipboard.min.js');
    }
    const handlebars = isLoadedScript('https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js');
    if (!handlebars){
        loadScript('https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js');
    }
    const markerCluster = isLoadedScript('https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js');
    if (!markerCluster){
        loadScript('https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js');
    }
    const mapApi = isLoadedScript('https://maps.googleapis.com/maps/api/js'+query+'&language='+lang);
    if (!mapApi){
        loadScript('https://maps.googleapis.com/maps/api/js'+query+'&language='+lang)
    }
    const snazzy = isLoadedScript('https://cdn.jsdelivr.net/npm/snazzy-info-window@1.1.1/dist/snazzy-info-window.min.js');
    if (!snazzy){
        loadScript('https://cdn.jsdelivr.net/npm/snazzy-info-window@1.1.1/dist/snazzy-info-window.min.js');
    }
}

function scriptsChecker () {
    return Boolean(window.$ && window.Handlebars && window.MarkerClusterer && window.ClipboardJS && window.google.maps && window.SnazzyInfoWindow);
}

function createScript(scriptText,scriptType, scriptId) {
    const script = document.createElement('script');
    if (scriptId){
        script.setAttribute('id',scriptId);
    }
    script.type = scriptType;
    script.text = scriptText;
    script.async =false;
    document.head.appendChild(script);
}

function init_map () {
    let map_json_data;
    if (detectMobile) {
        document.querySelector('.'+canvasClass).classList.add('for-app');
    }

    map_style = [
        {
            featureType: "poi",
            stylers: [
                { visibility: "off" }
            ]
        }
    ];

    marker_text_color = 'black';
    gestureHandling = 'greedy';

    let options = {};


    // let map_settings = map_json_data.map_settings;
    // let map_markers = map_json_data.markers_without_filter;
    options.container = document.querySelector('.'+canvasClass);
    options.filtered_markers={};
    let key =0;


    poiCategoriesData.forEach(category =>{
        if (category.data.length > 0){
            const categoryName = category.name.filter(elName=>elName.lang === lang)[0].value;
            category.data.forEach(catData =>{
                const dataName = catData.name.filter(dataElementName => dataElementName.lang === lang)[0].value;
                const description = catData.description.filter(dataDescription => dataDescription.lang === lang)[0].value;
                const obj = {
                    [key]:{
                        'category': categoryName,
                        'title': dataName,
                        'lat': catData.latitude,
                        'lng': catData.longitude,
                        // 'marker_icon': category.icon,
                        'marker_icon': 'img/odessa.png',
                        'cluster_icon': category.iconCluster,
                        'category_title': categoryName,
                        'category_zoom': 16,
                        'category_img': category.iconMenu,
                        'info_window_img': 'null',
                        'marker_description': description,
                        'web_site_url': catData.url,
                    }
                };
                key++;
                Object.assign(options.filtered_markers,obj);
            });
        }
    });

    // options.filtered_markers = map_json_data.map_markers_with_filter;
    let template_1 = window.Handlebars.compile($('#exp-map-template').html());
    options.popup_templates = [template_1];
    options.map_settings = {
        map_style : map_style,
        lng : 30.7610757,
        lat : 46.435974,
        zoom: 16,
        static_markers : {
            '0':{
                'title': 'Odessa 2020',
                'lat': 46.435974,
                'lng': 30.7610757,
                'marker_icon': 'img/odessa.png',
                'marker_text': '',
            }
        },
        all_category_icon : 'https://www.251w117.com/wp-content/uploads/2020/02/ic_all.svg',
    };

    let experimental_map_obj = add_experimental_map(options);

}

function add_experimental_map (options) {
    mapGlobalOption = options;

    let container = options.container;

    let map_filtered_markers = options.filtered_markers;
    let popup_templates = options.popup_templates;
    let map_settings = options.map_settings;
    let experimental_map_obj = {};
    let map_filtered_markers_on_map = [];
    let global_cluster = [];
    let directionsService = new google.maps.DirectionsService;
    let directionsRenderer = new google.maps.DirectionsRenderer({
        suppressMarkers: true,
        preserveViewport: true,
        provideRouteAlternatives: true,
        /*        polylineOptions: {
                    strokeColor : '#ff0000'
                }*/
    });
    // if (get_url_param('lang') == 'en') {
    //     $('html').attr('dir', 'ltr');
    //     $('html').attr('lang', 'en');
    // }


    // Add map container
    $(container).addClass('map-parent');
    let map_container_html = '<div class="map-container"></div>';
    $(container).append(map_container_html);
    let btns_html = `
        <div class="zoom-control">
            <div class="plus zoom-control-btn"></div>
            <div class="sep"></div>
            <div class="minus zoom-control-btn"></div>
        </div>
        <div class="fullscreen-control"></div>
        <div class="map-type">
            <div class="map-type-toggler roadmap"><span class="const-text">Change map type to:</span><span class="var-text">לווין</span></div>
        </div>
        <div class="route-panel"></div> 
        <div class="filter">
            <div class="filter-btn">
                
            </div>
            <div class="filters-list-wrap">            
                <div class="filters-list"></div>
            </div>
        </div>
        <div class="map__go-home__btn">
            <img class="home-btn__img" src="#" alt="home button">
        </div>
        <div class="snazzy-card__window"></div>
    `;
    $(container).append(btns_html);

    let btnGoHome = document.querySelector('.map__go-home__btn');
    btnGoHome.addEventListener('click', mapHomeHandler);

    function mapHomeHandler(){
        smoothlyAnimatePanTo(map, center);
    }


    function mapCenterChangeHandler(){
        var destPixel = getPixel(center, map.getZoom());
        var mapPixel = getPixel(map.getCenter(), map.getZoom());
        var diffX = (destPixel.x - mapPixel.x);
        var diffY = (destPixel.y - mapPixel.y);
        const max = 50;
        const min = 0;
        const mobileScale = 13;
        const desktopScale = 3;
        let addY;
        let cardHeight = 0;
        const homeIcon = document.querySelector('.home-btn__img');

        if (Math.abs(diffX) > window.innerWidth / 1.7 || Math.abs(diffY) > window.innerHeight / 1.7){
            const card = document.querySelector('.si-wrapper-top.custom-window.open.active');
            if (card){
                cardHeight = card.getBoundingClientRect().height;
            }


            if (window.innerWidth >= 768){
                diffX = diffX * desktopScale;
                diffY = diffY * desktopScale;
                addY = 2
            } else {
                diffX = diffX * mobileScale;
                diffY = diffY * mobileScale;
                addY = 0.7;
            }


            if (diffY < 0){
                removeAllStyleProporty();
                const calcY = max - (Math.abs(diffY) / max) * addY;
                if (calcY <= max && calcY > min){
                    btnGoHome.style.top = calcY +'%';

                } else {
                    btnGoHome.style.top = 0;
                }
                if (diffX > 0){
                    const calcX = max - (diffX / max);
                    if (calcX <= max && calcX > min){
                        btnGoHome.style.right = calcX +'%';
                    } else {
                        btnGoHome.style.right = 0;
                    }
                }
                if (diffX < 0){
                    const calcX = max - (Math.abs(diffX) / max);
                    if (calcX <= max && calcX > min){
                        btnGoHome.style.left = calcX +'%';
                    }else {
                        btnGoHome.style.left = 0;
                    }
                }

                if (parseFloat(btnGoHome.style.top) > 0 && parseFloat(btnGoHome.style.left) > 0){
                    if (parseFloat(btnGoHome.style.top) > parseFloat(btnGoHome.style.left)){
                        btnGoHome.style.left = 0;
                    }else {
                        btnGoHome.style.top = 0;
                    }
                }

                if (parseFloat(btnGoHome.style.top) > 0 && parseFloat(btnGoHome.style.right) > 0){
                    if (parseFloat(btnGoHome.style.top) > parseFloat(btnGoHome.style.right)){
                        btnGoHome.style.right = 0;
                    }else {
                        btnGoHome.style.top = 0;
                    }
                }

                if (parseFloat(btnGoHome.style.top) === 0){
                    homeIcon.src = './img/home/home_top.svg';
                }

                if (parseFloat(btnGoHome.style.right) === 0){
                    homeIcon.src = './img/home/home_right.svg';
                }

                if (parseFloat(btnGoHome.style.left) === 0){
                    homeIcon.src = './img/home/home_left.svg';
                }

                if (parseFloat(btnGoHome.style.top) === 0 && parseFloat(btnGoHome.style.left) === 0){
                    homeIcon.src = './img/home/home_top_left.svg';
                }

                if (parseFloat(btnGoHome.style.top) === 0 && parseFloat(btnGoHome.style.right) === 0){
                    homeIcon.src = './img/home/home_top_right.svg';
                }

            } else {
                removeAllStyleProporty();
                const calcY = max - (Math.abs(diffY) / max) * addY;
                if (calcY <= max && calcY > min){
                    btnGoHome.style.bottom = calcY+'%';
                } else {
                    btnGoHome.style.bottom = 0;
                }

                if(diffX > 0){
                    const calcX = max - (diffX / max);
                    if (calcX <= max && calcX > min){
                        btnGoHome.style.right = calcX +'%';
                    } else {
                        btnGoHome.style.right = 0;
                    }
                }
                if (diffX < 0){
                    const calcX = max - (Math.abs(diffX) / max);
                    if (calcX <= max && calcX > min){
                        btnGoHome.style.left = calcX +'%';
                    }else {
                        btnGoHome.style.left = 0;
                    }
                }

                if (parseFloat(btnGoHome.style.bottom) > 0 && parseFloat(btnGoHome.style.left) > 0){
                    if (parseFloat(btnGoHome.style.bottom) > parseFloat(btnGoHome.style.left)){
                        btnGoHome.style.left = 0;
                    }else {
                        btnGoHome.style.bottom = 0;
                    }
                }

                if (parseFloat(btnGoHome.style.bottom) > 0 && parseFloat(btnGoHome.style.right) > 0){
                    if (parseFloat(btnGoHome.style.bottom) > parseFloat(btnGoHome.style.right)){
                        btnGoHome.style.right = 0;
                    }else {
                        btnGoHome.style.bottom = 0;
                    }
                }


                if (parseFloat(btnGoHome.style.bottom) === 0){
                    homeIcon.src = './img/home/home_bottom.svg';
                }

                if (parseFloat(btnGoHome.style.right) === 0){
                    homeIcon.src = './img/home/home_right.svg';
                }

                if (parseFloat(btnGoHome.style.left) === 0){
                    homeIcon.src = './img/home/home_left.svg';
                }

                if (parseFloat(btnGoHome.style.bottom) === 0 && parseFloat(btnGoHome.style.left) === 0){
                    homeIcon.src = './img/home/home_bottom_left.svg';
                }

                if (parseFloat(btnGoHome.style.bottom) === 0 && parseFloat(btnGoHome.style.right) === 0){
                    homeIcon.src = './img/home/home_bottom_right.svg';
                }
            }
        } else {
            removeAllStyleProporty();
        }
    }

    function removeAllStyleProporty(){
        btnGoHome.style.removeProperty('top');
        btnGoHome.style.removeProperty('bottom');
        btnGoHome.style.removeProperty('left');
        btnGoHome.style.removeProperty('right');
    }

    // Add map container end
    let map_container = $(container).find('.map-container')[0];

    let center = new google.maps.LatLng(options.map_settings.lat, options.map_settings.lng);
    let mapOptions = {
        zoom: options.map_settings.zoom,
        center: center,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false,
        streetViewControl: false,
        rotateControl: false,
        styles: options.map_settings.map_style,
        scrollwheel: true,
        zoomControl: false,
        scaleControl: false,
        fullscreenControl: false,
        gestureHandling : gestureHandling,
    };
    map = new google.maps.Map(map_container, mapOptions);

    map.addListener('center_changed', mapCenterChangeHandler);
    map.addListener('click', mapClickHandler);

    function mapClickHandler(){
        const card = document.querySelector('.si-wrapper-top.custom-window.open');
        if (card){
            card.remove();
            directionsRenderer.setMap(null);
        }
    }

    experimental_map_obj.map = map;

    directionsRenderer.setMap(map);
    // let is_gindi = true;
    // if (is_gindi) {
    //     let check = false;
    //     (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
    //     if (!check) {
    //         if (get_url_param('lang') !== 'en') {
    //             add_metro_routes ();
    //         }
    //     }
    // }
    // function add_metro_routes () {
    //     window.add_points_mode = false;
    //     window.addEventListener( 'keydown', function ( event ) {
    //         if (event.ctrlKey) {
    //             window.ctrl = true;
    //             if (event.altKey) {
    //                 event.code;
    //                 switch ( event.code ) {
    //                     case 'KeyP':  //  P
    //                         if (window.add_points_mode ) {
    //                             window.add_points_mode = false;
    //                             console.log('Режим добавления точек выключен');
    //                         } else {
    //                             window.add_points_mode = true;
    //                             console.log('Режим добавления точек включен');
    //                         }
    //                         break;
    //                     case 'KeyR':  //  P
    //                         if (window.polyline_points.length > 0 ) {
    //                             update_polyline(window.polyline_points[0].lat, window.polyline_points[0].lng)
    //                         }
    //                         break;
    //                 }
    //             }
    //             if (event.code === 'KeyZ') {
    //                 if (window.polyline_points.length > 0) {
    //                     let with_marker = window.polyline_points[window.polyline_points.length - 1]['with_marker'];
    //
    //                     if (with_marker) {
    //                         if (window.polyline_markers.length > 0) {
    //                             window.polyline_markers[window.polyline_markers.length - 1].setMap(null);
    //                         }
    //                     }
    //                     window.polyline_points.pop();
    //                     window.polyline_markers.pop();
    //                     update_polyline();
    //                 }
    //             }
    //         }
    //     });
    //     window.addEventListener( 'keyup', function ( event ) {
    //         if (!event.ctrlKey) {
    //             window.ctrl = false;
    //             console.log('клавиша контрол отжата');
    //         }
    //     });
    //
    //     window.polyline_points = [];
    //     /*    update_polyline(window.polyline_points[0].lat, window.polyline_points[0].lng);
    //         update_polyline(window.polyline_points[0].lat, window.polyline_points[0].lng);*/
    //     window.polyline_markers = [];
    //
    //     let exist_polylines = [
    //         {
    //             color: '#00a04a',
    //             img : 'img/metro/circle_green.svg',
    //             points : [
    //                 {
    //                     "lat": 32.16344711531778,
    //                     "lng": 34.805245139886665,
    //                     "with_marker": true,
    //                     "marker_title": "אבא אבן"
    //                 },
    //                 {
    //                     "lat": 32.15979595223486,
    //                     "lng": 34.80385039119892,
    //                     "with_marker": true,
    //                     "marker_title": "החושלים"
    //                 },
    //                 {
    //                     "lat": 32.155563326369005,
    //                     "lng": 34.801490047265816,
    //                     "with_marker": true,
    //                     "marker_title": "אלטנוילנד"
    //                 },
    //                 {
    //                     "lat": 32.152534360001596,
    //                     "lng": 34.80052985129912,
    //                     "with_marker": true,
    //                     "marker_title": "חוף התכלת צפון"
    //                 },
    //                 {
    //                     "lat": 32.147138660182456,
    //                     "lng": 34.798877610545944,
    //                     "with_marker": true,
    //                     "marker_title": "חוף התכלת דרום"
    //                 },
    //                 {
    //                     "lat": 32.14272680106809,
    //                     "lng": 34.79678884887324,
    //                     "with_marker": true,
    //                     "marker_title": "יוניצ’מן"
    //                 },
    //                 {
    //                     "lat": 32.14209073367346,
    //                     "lng": 34.79592393486031,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.140682634373604,
    //                     "lng": 34.7946793898774,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.139483461698354,
    //                     "lng": 34.7937245234681,
    //                     "with_marker": true,
    //                     "marker_title": "מכללת לוינסקי צפון"
    //                 },
    //                 {
    //                     "lat": 32.13825781148531,
    //                     "lng": 34.793219959910004,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.136658868568695,
    //                     "lng": 34.792941010172456,
    //                     "with_marker": true,
    //                     "marker_title": "מכללת לוינסקי דרום"
    //                 },
    //                 {
    //                     "lat": 32.13510479372708,
    //                     "lng": 34.79272927201185,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.133533051421544,
    //                     "lng": 34.792064084176154,
    //                     "with_marker": true,
    //                     "marker_title": "שושנה פרסיץ"
    //                 },
    //                 {
    //                     "lat": 32.13151177735811,
    //                     "lng": 34.790896368782015,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.12976734559699,
    //                     "lng": 34.78984494284818,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.12851351466569,
    //                     "lng": 34.78905100897977,
    //                     "with_marker": true,
    //                     "marker_title": "אזורי חן"
    //                 },
    //                 {
    //                     "lat": 32.12685988520535,
    //                     "lng": 34.78851456717679,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.125079019961994,
    //                     "lng": 34.78834290579984,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.12415222940111,
    //                     "lng": 34.788149786750765,
    //                     "with_marker": true,
    //                     "marker_title": "פרופס"
    //                 },
    //                 {
    //                     "lat": 32.11865935491899,
    //                     "lng": 34.786033956350245,
    //                     "with_marker": true,
    //                     "marker_title": "הגוש הגדול"
    //                 },
    //                 {
    //                     "lat": 32.11582424425463,
    //                     "lng": 34.78466066533462,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.111316952581774,
    //                     "lng": 34.78457483464614,
    //                     "with_marker": true,
    //                     "marker_title": "איינשטיין"
    //                 },
    //                 {
    //                     "lat": 32.10949943330456,
    //                     "lng": 34.78397401982681,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.108808766492544,
    //                     "lng": 34.78341612035171,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.10717295583482,
    //                     "lng": 34.78285822087661,
    //                     "with_marker": true,
    //                     "marker_title": "דוב"
    //                 },
    //                 {
    //                     "lat": 32.105200046941825,
    //                     "lng": 34.781570760549464,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.10381864305278,
    //                     "lng": 34.781570760549464,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.10189191325837,
    //                     "lng": 34.781527845205225,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09909262962323,
    //                     "lng": 34.782772390188136,
    //                     "with_marker": true,
    //                     "marker_title": "רדינג"
    //                 },
    //                 {
    //                     "lat": 32.098220108095475,
    //                     "lng": 34.78322300130264,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09743846714945,
    //                     "lng": 34.78346976453201,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.096393239153464,
    //                     "lng": 34.783534137548365,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09558431536455,
    //                     "lng": 34.78360923940078,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.095029880315806,
    //                     "lng": 34.783544866384425,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09345393223595,
    //                     "lng": 34.78318113774598,
    //                     "with_marker": true,
    //                     "marker_title": "נורדאו"
    //                 },
    //                 {
    //                     "lat": 32.09179057820804,
    //                     "lng": 34.78284854382813,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08926367644101,
    //                     "lng": 34.78237647504151,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08848195886382,
    //                     "lng": 34.782204813664556,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0867548846946,
    //                     "lng": 34.78184003323853,
    //                     "with_marker": true,
    //                     "marker_title": "ארלוזורוב מערב"
    //                 },
    //                 {
    //                     "lat": 32.084864155546974,
    //                     "lng": 34.781475252812506,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08313701300524,
    //                     "lng": 34.78119630307496,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08182799902082,
    //                     "lng": 34.78111047238648,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07991898668826,
    //                     "lng": 34.78106755704224,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0792280962091,
    //                     "lng": 34.78111047238648,
    //                     "with_marker": true,
    //                     "marker_title": "רבין"
    //                 },
    //                 {
    //                     "lat": 32.077595499711876,
    //                     "lng": 34.7810782858783,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.075959130102866,
    //                     "lng": 34.78138942212403,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07450455475027,
    //                     "lng": 34.78155035466492,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07375907591268,
    //                     "lng": 34.78160399884522,
    //                     "with_marker": true,
    //                     "marker_title": "קפלן"
    //                 },
    //                 {
    //                     "lat": 32.072677211666566,
    //                     "lng": 34.78166837186158,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07156806024279,
    //                     "lng": 34.78162545651734,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07111348610019,
    //                     "lng": 34.78177566022217,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07027706377332,
    //                     "lng": 34.78239793271363,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06969520025093,
    //                     "lng": 34.78256959409058,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06861328792177,
    //                     "lng": 34.78287000150025,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.067685924308954,
    //                     "lng": 34.78308457822144,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.067032792241726,
    //                     "lng": 34.78326965837684,
    //                     "with_marker": true,
    //                     "marker_title": "קרליבך"
    //                 },
    //                 {
    //                     "lat": 32.06611637576035,
    //                     "lng": 34.783505520707585,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06597772262079,
    //                     "lng": 34.78344651210926,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.065702688721906,
    //                     "lng": 34.78331776607654,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06528445376991,
    //                     "lng": 34.782923481351354,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.064602544855674,
    //                     "lng": 34.78193642843387,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.063584218078816,
    //                     "lng": 34.780133983975865,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06286932350639,
    //                     "lng": 34.77851857734852,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.062409922558615,
    //                     "lng": 34.777944297143215,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.061600697986066,
    //                     "lng": 34.777402490922206,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.061155166794904,
    //                     "lng": 34.77714499885678,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.060482319658405,
    //                     "lng": 34.77710208351254,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.059754911781475,
    //                     "lng": 34.77811059410214,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05877290197261,
    //                     "lng": 34.777456135102504,
    //                     "with_marker": true,
    //                     "marker_title": "לוינסקי"
    //                 },
    //                 {
    //                     "lat": 32.05753470957245,
    //                     "lng": 34.77677076188668,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05609802715762,
    //                     "lng": 34.77584808198556,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05435215487141,
    //                     "lng": 34.77507560578927,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05333371398683,
    //                     "lng": 34.77458207933053,
    //                     "with_marker": true,
    //                     "marker_title": "חזקיהו"
    //                 },
    //                 {
    //                     "lat": 32.05187877877381,
    //                     "lng": 34.77404563752755,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05033288476287,
    //                     "lng": 34.773423365036095,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.04976908162473,
    //                     "lng": 34.77327316133126,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0486232774482,
    //                     "lng": 34.77297275392159,
    //                     "with_marker": true,
    //                     "marker_title": "קיבוץ גלויות"
    //                 },
    //                 {
    //                     "lat": 32.04644075361692,
    //                     "lng": 34.772135904708946,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.04518577884724,
    //                     "lng": 34.77172820893868,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.04411267083193,
    //                     "lng": 34.77147071687325,
    //                     "with_marker": true,
    //                     "marker_title": "אבו כביר"
    //                 },
    //                 {
    //                     "lat": 32.04287585276799,
    //                     "lng": 34.771663835922325,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.042166493690665,
    //                     "lng": 34.77205007402047,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.04131161775523,
    //                     "lng": 34.773144415298546,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.04103878332937,
    //                     "lng": 34.773702314773644,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.04050143379172,
    //                     "lng": 34.77457514425214,
    //                     "with_marker": true,
    //                     "marker_title": "גיתית"
    //                 },
    //                 {
    //                     "lat": 32.03965563693979,
    //                     "lng": 34.77584114690717,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.03892806350344,
    //                     "lng": 34.7769998612016,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.03860065357068,
    //                     "lng": 34.77757921834882,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.03827324246708,
    //                     "lng": 34.77785816808637,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.037145484148205,
    //                     "lng": 34.77781525274213,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.03576305177511,
    //                     "lng": 34.77674236913617,
    //                     "with_marker": true,
    //                     "marker_title": "צומת חולון"
    //                 },
    //                 {
    //                     "lat": 32.034144124173984,
    //                     "lng": 34.77581968923505,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.032361451682725,
    //                     "lng": 34.774918467006046,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.03076065497595,
    //                     "lng": 34.77410307546552,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.029487273977765,
    //                     "lng": 34.77354517599042,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.02790461863241,
    //                     "lng": 34.77333059926923,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.02677673261692,
    //                     "lng": 34.77350226064618,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.025694765729824,
    //                     "lng": 34.773840650800516,
    //                     "with_marker": true,
    //                     "marker_title": "יד לבנים"
    //                 },
    //                 {
    //                     "lat": 32.02312965262491,
    //                     "lng": 34.77443073678379,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.022617618428974,
    //                     "lng": 34.77464445709756,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.022572136797905,
    //                     "lng": 34.77509506821206,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.022572136797905,
    //                     "lng": 34.77538474678567,
    //                     "with_marker": true,
    //                     "marker_title": "הנשיאים"
    //                 },
    //                 {
    //                     "lat": 32.022499366141204,
    //                     "lng": 34.77617868065408,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.02219009020544,
    //                     "lng": 34.77615722298196,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.021189484436526,
    //                     "lng": 34.77602847694924,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.020061515739314,
    //                     "lng": 34.77592118858865,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.01770671225643,
    //                     "lng": 34.77550292862379,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.01733315232331,
    //                     "lng": 34.775455715930114,
    //                     "with_marker": true,
    //                     "marker_title": "ההסתדרות"
    //                 },
    //                 {
    //                     "lat": 32.01683519830308,
    //                     "lng": 34.77538597849573,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.01664871170315,
    //                     "lng": 34.77538597849573,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.013555707870694,
    //                     "lng": 34.774924638545166,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.01266872427574,
    //                     "lng": 34.7747690704223,
    //                     "with_marker": true,
    //                     "marker_title": "גולדה מאיר"
    //                 },
    //                 {
    //                     "lat": 32.00834233923043,
    //                     "lng": 34.77379118493931,
    //                     "with_marker": true,
    //                     "marker_title": "לבון"
    //                 },
    //                 {
    //                     "lat": 32.0040046843169,
    //                     "lng": 34.773387877863094,
    //                     "with_marker": true,
    //                     "marker_title": "בגין"
    //                 },
    //                 {
    //                     "lat": 32.0031994925953,
    //                     "lng": 34.773323504846736,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.00255351446329,
    //                     "lng": 34.77327522508447,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.00162843925699,
    //                     "lng": 34.7731526850621,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.99984513406409,
    //                     "lng": 34.77310976971786,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.999590373348063,
    //                     "lng": 34.77300248135727,
    //                     "with_marker": true,
    //                     "marker_title": "חיים שרון"
    //                 },
    //                 {
    //                     "lat": 31.998962567133624,
    //                     "lng": 34.773576474086454,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.998462138811615,
    //                     "lng": 34.77414510239761,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.997883847597514,
    //                     "lng": 34.77475074158393,
    //                     "with_marker": true,
    //                     "marker_title": "לסקוב"
    //                 },
    //                 {
    //                     "lat": 31.997665476642172,
    //                     "lng": 34.77490899191581,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.9961529817113,
    //                     "lng": 34.7764584753393,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.995843616865344,
    //                     "lng": 34.776780340421084,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.99535227055321,
    //                     "lng": 34.77705929015863,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.995024704882635,
    //                     "lng": 34.776994917142275,
    //                     "with_marker": true,
    //                     "marker_title": "ח’ 5"
    //                 },
    //                 {
    //                     "lat": 31.99202196505171,
    //                     "lng": 34.77733823989618,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.99141815101208,
    //                     "lng": 34.777252984759755,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.98950725281034,
    //                     "lng": 34.77611572813744,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.98926156301052,
    //                     "lng": 34.77596552443261,
    //                     "with_marker": true,
    //                     "marker_title": "סחרוב"
    //                 },
    //                 {
    //                     "lat": 31.984875725360087,
    //                     "lng": 34.773150572599654,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.982746284397937,
    //                     "lng": 34.77194894296098,
    //                     "with_marker": true,
    //                     "marker_title": "אבני חושן"
    //                 },
    //                 {
    //                     "lat": 31.98236407181436,
    //                     "lng": 34.77158416253496,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.982464175263953,
    //                     "lng": 34.77130521279741,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.982641631110702,
    //                     "lng": 34.77100480538774,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.983474303962065,
    //                     "lng": 34.76930964929033,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.984686199039523,
    //                     "lng": 34.76681801378005,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.98594200262279,
    //                     "lng": 34.76417839137812,
    //                     "with_marker": true,
    //                     "marker_title": "לישנסקי"
    //                 },
    //                 {
    //                     "lat": 31.98641380429387,
    //                     "lng": 34.763126572468025,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.986468403778947,
    //                     "lng": 34.76246138463233,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.986759600483868,
    //                     "lng": 34.76101299176429,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 31.987241892993172,
    //                     "lng": 34.75882430920814,
    //                     "with_marker": true,
    //                     "marker_title": "מסוף דיין"
    //                 }
    //             ]
    //         }, {
    //             color: '#ee1d22',
    //             img : 'img/metro/circle_red.svg',
    //             points : [
    //                 {
    //                     "lat": 32.09385600631248,
    //                     "lng": 34.84549880214337,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.092638039560796,
    //                     "lng": 34.84475851245526,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09255623524186,
    //                     "lng": 34.84472632594708,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09245625208588,
    //                     "lng": 34.843589069324764,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09261986082958,
    //                     "lng": 34.841346742588314,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09274254784496,
    //                     "lng": 34.84040114217203,
    //                     "with_marker": true,
    //                     "marker_title": "אהרונוביץ'"
    //                 },
    //                 {
    //                     "lat": 32.092760726551774,
    //                     "lng": 34.83877035909097,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09281526265048,
    //                     "lng": 34.83759018712442,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09281526265048,
    //                     "lng": 34.83634564214151,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09245168804419,
    //                     "lng": 34.834092586569,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09223354258595,
    //                     "lng": 34.832955329946685,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0917608923063,
    //                     "lng": 34.83158203893106,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0915427451987,
    //                     "lng": 34.830680816702056,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.091615460959105,
    //                     "lng": 34.82889982991617,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.091833607893086,
    //                     "lng": 34.82737633519571,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.091615460959105,
    //                     "lng": 34.82628199391763,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09122748903861,
    //                     "lng": 34.824836995715536,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.090954803480805,
    //                     "lng": 34.823120381946005,
    //                     "with_marker": true,
    //                     "marker_title": "בן-גוריון"
    //                 },
    //                 {
    //                     "lat": 32.090591221471115,
    //                     "lng": 34.82140786042358,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.09024581722186,
    //                     "lng": 34.81988436570312,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08979133595721,
    //                     "lng": 34.818918770457756,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08930049365233,
    //                     "lng": 34.81778151383544,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08911869953696,
    //                     "lng": 34.81685883393432,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08875511022118,
    //                     "lng": 34.815442627574456,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08855513548084,
    //                     "lng": 34.814820355083,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08751889572605,
    //                     "lng": 34.8132539450183,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.086565722698225,
    //                     "lng": 34.811798587523185,
    //                     "with_marker": true,
    //                     "marker_title": "ביאליק"
    //                 },
    //                 {
    //                     "lat": 32.085419036589556,
    //                     "lng": 34.81054133250601,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.084310039756865,
    //                     "lng": 34.80903929545767,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.083710085041425,
    //                     "lng": 34.80706518962271,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08329193245614,
    //                     "lng": 34.80528420283682,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08311012638755,
    //                     "lng": 34.80431860759146,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08310103607463,
    //                     "lng": 34.802988231920075,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08314648763021,
    //                     "lng": 34.80237668826468,
    //                     "with_marker": true,
    //                     "marker_title": "אבא הלל"
    //                 },
    //                 {
    //                     "lat": 32.082410169647126,
    //                     "lng": 34.80008071734793,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08181020246024,
    //                     "lng": 34.79855722262747,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.08134888315536,
    //                     "lng": 34.797517948595754,
    //                     "with_marker": true,
    //                     "marker_title": "ארלוזורוב"
    //                 },
    //                 {
    //                     "lat": 32.07951239208074,
    //                     "lng": 34.79471607462552,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07849423133901,
    //                     "lng": 34.793063833872345,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07695417064714,
    //                     "lng": 34.79213865729336,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07659897312528,
    //                     "lng": 34.79192680194266,
    //                     "with_marker": true,
    //                     "marker_title": "שאול המלך"
    //                 },
    //                 {
    //                     "lat": 32.075362594203966,
    //                     "lng": 34.79121869876273,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07368981963794,
    //                     "lng": 34.79033893420584,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07187155170144,
    //                     "lng": 34.78969520404227,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07105582584618,
    //                     "lng": 34.78926412451235,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07090581578859,
    //                     "lng": 34.78902272570101,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.07071489354123,
    //                     "lng": 34.78879205572573,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.070501241982235,
    //                     "lng": 34.78852919924227,
    //                     "with_marker": true,
    //                     "marker_title": "יהודית"
    //                 },
    //                 {
    //                     "lat": 32.06967560711756,
    //                     "lng": 34.78782394301469,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0692301152603,
    //                     "lng": 34.78738406073625,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06876643775696,
    //                     "lng": 34.78693344962175,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06749358546666,
    //                     "lng": 34.78540995490129,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0668116930236,
    //                     "lng": 34.78468039404924,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06624799143196,
    //                     "lng": 34.78397229086931,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.065911587213755,
    //                     "lng": 34.7836289681154,
    //                     "with_marker": true,
    //                     "marker_title": "קרליבך"
    //                 },
    //                 {
    //                     "lat": 32.065508550670764,
    //                     "lng": 34.78335149043996,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.065372169628816,
    //                     "lng": 34.78319055789907,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.0650448542984,
    //                     "lng": 34.782793590964864,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06447204965153,
    //                     "lng": 34.78197819942434,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06406290127889,
    //                     "lng": 34.78120572322805,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06357192081578,
    //                     "lng": 34.78040106052358,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06312639922588,
    //                     "lng": 34.77962858432729,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06303547618581,
    //                     "lng": 34.77938182109792,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06340826007575,
    //                     "lng": 34.778802463950704,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06369012005703,
    //                     "lng": 34.77811581844289,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.063744673501475,
    //                     "lng": 34.77691418880422,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06369921230003,
    //                     "lng": 34.776549408378195,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.06253539784985,
    //                     "lng": 34.77495081180532,
    //                     "with_marker": true,
    //                     "marker_title": "אלנבי"
    //                 },
    //                 {
    //                     "lat": 32.06118971893257,
    //                     "lng": 34.77216131442983,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.059553055731925,
    //                     "lng": 34.767311880530904,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05944394381072,
    //                     "lng": 34.76598150485952,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05893475312448,
    //                     "lng": 34.76493007892568,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05824370408849,
    //                     "lng": 34.76344949954946,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05811640501251,
    //                     "lng": 34.763084719123434,
    //                     "with_marker": true,
    //                     "marker_title": "אליפלט"
    //                 },
    //                 {
    //                     "lat": 32.05756174268559,
    //                     "lng": 34.76143247837026,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.057425349795004,
    //                     "lng": 34.76070291751821,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.056997984087715,
    //                     "lng": 34.75991971248586,
    //                     "with_marker": false
    //                 },
    //                 {
    //                     "lat": 32.05676156815799,
    //                     "lng": 34.75975877994497,
    //                     "with_marker": false
    //                 }
    //             ]
    //         }
    //     ];
    //     exist_polylines.forEach(function(lines_array){
    //         let color = lines_array.color;
    //         let img = lines_array.img;
    //
    //         let lines = new google.maps.Polyline({
    //             path: lines_array.points,
    //             geodesic: true,
    //             strokeColor: color,
    //             strokeOpacity: 0.8,
    //             strokeWeight: 5
    //         });
    //         lines.setMap(map);
    //         lines_array.points.forEach(function(point){
    //             if (point.with_marker) {
    //                 let lat = point.lat;
    //                 let lng = point.lng;
    //                 let title = point.marker_title;
    //                 var icon_img = new google.maps.MarkerImage();
    //                 icon_img.url = img;
    //                 icon_img.labelOrigin = new google.maps.Point(0, 50);
    //                 icon_img.scaledSize = new google.maps.Size(20,20);
    //                 icon_img.size = new google.maps.Size(20, 30);
    //                 icon_img.origin = new google.maps.Point(0, -10);
    //                 var marker = new google.maps.Marker({
    //                     position: { lat: lat -0.00015, lng: lng },
    //                     icon: icon_img,
    //                     map: map,
    //                     title : title,
    //                     /*                   label : {
    //                                            color : '#000000',
    //                                            text : title,
    //                                            fontWeight : '700',
    //                                            textAlign : center,
    //                                        },*/
    //                 });
    //                 let infowindow = new google.maps.InfoWindow({
    //                     content: '<span class="line-title" style="color : ' + color +'">' + title + '<span></span>'
    //                 });
    //                 marker.addListener('mouseover', function() {
    //                     infowindow.open(map, this);
    //                 });
    //                 marker.addListener('mouseout', function() {
    //                     infowindow.close();
    //                 });
    //             }
    //         });
    //     });
    //
    //
    //
    //     map.addListener('click' ,function(e){
    //         if (window.add_points_mode) {
    //             const lat = e.latLng.lat();
    //             const lng = e.latLng.lng();
    //             console.log(e);
    //             if (window.ctrl == true) {
    //                 let title = prompt('заголовок маркера', 'Заголовок');
    //                 window.polyline_points.push({ lat: lat, lng: lng, with_marker : true , marker_title : title});
    //                 window.ctrl = false;
    //             } else {
    //                 window.polyline_points.push({ lat: lat, lng: lng, with_marker : false });
    //             }
    //             update_polyline (lat, lng);
    //         }
    //     });
    //     function update_polyline (lat, lng) {
    //         if (window.flightPath ) {
    //             // window.flightPath.setPoints (window.polyline_points);
    //             window.flightPath.setMap(null);
    //             window.flightPath  =  new google.maps.Polyline({
    //                 path: window.polyline_points,
    //                 geodesic: true,
    //                 strokeColor: '#00a04a',
    //                 strokeOpacity: 0.8,
    //                 strokeWeight: 5
    //             });
    //             window.flightPath.setMap(map);
    //         } else {
    //             window.flightPath  =  new google.maps.Polyline({
    //                 path: [{ lat: lat, lng: lng }, { lat: lat, lng: lng }],
    //                 geodesic: true,
    //                 strokeColor: '#00a04a',
    //                 strokeOpacity: 0.8,
    //                 strokeWeight: 5
    //             });
    //             window.flightPath.setMap(map);
    //         }
    //         if (window.polyline_points.length > 0) {
    //             if (window.polyline_markers) {
    //                 window.polyline_markers.forEach(function(marker){
    //                     marker.setMap(null);
    //                 });
    //             }
    //             window.polyline_markers = [];
    //             window.polyline_points.forEach(function(point){
    //                 if (point.with_marker) {
    //                     console.log(point);
    //                     let lat = point.lat;
    //                     let lng = point.lng;
    //                     let title = point.marker_title;
    //                     var icon_img = new google.maps.MarkerImage();
    //                     icon_img.url = 'img/metro/circle_green.svg';
    //                     icon_img.labelOrigin = new google.maps.Point(0, 50);
    //                     icon_img.scaledSize = new google.maps.Size(20,20);
    //                     icon_img.size = new google.maps.Size(20, 30);
    //                     icon_img.origin = new google.maps.Point(0, -10);
    //                     var marker = new google.maps.Marker({
    //                         position: { lat: lat -0.00015, lng: lng },
    //                         icon: icon_img,
    //                         map: map,
    //                         title : title,
    //                         /*                   label : {
    //                                                color : '#000000',
    //                                                text : title,
    //                                                fontWeight : '700',
    //                                                textAlign : center,
    //                                            },*/
    //                     });
    //                     let infowindow = new google.maps.InfoWindow({
    //                         content: '<span class="green-line">' + title + '<span></span>'
    //                     });
    //                     marker.addListener('mouseover', function() {
    //                         infowindow.open(map, this);
    //                     });
    //                     marker.addListener('mouseout', function() {
    //                         infowindow.close();
    //                     });
    //                     window.polyline_markers.push(marker);
    //                 }
    //             });
    //         }
    //
    //     }
    // }
    let filter = $(container).find('.filter');
    let filter_list = $(container).find('.filters-list');
    let filter_open = false;
    $(container).find('.filter-btn').click(function(){
        $(this).toggleClass('open');
        $(container).find('.map-container').toggleClass('open');
        filter_list_animate ();
    });
    $(window).resize(filters_list_on_resize);
    function filters_list_on_resize () {
        let container_height = $(container).outerHeight();
        if (filter_open == true) {
            filter_list.parent().css({
                'top' : container_height * -1
            });
        } else {
            filter_list.parent().css({
                'top' : 0
            });
        }
    }
    function filter_list_animate () {
        let container_height = $(container).outerHeight();
        if (filter_open == true) {
            filter_open = false;
            filter_list.parent().animate({
                'top' : 0
            }, 500);
        } else {
            filter_list.parent().animate({
                'top' : container_height * -1
            }, 500);
            filter_open = true;
        }
    }

    $(container).find('.zoom-control-btn.plus').click(function(){
        let target_zoom = map.getZoom() + 1;
        map.setZoom(target_zoom);
        // map.setMapTypeId('satellite' );
    });

    $(container).find('.zoom-control-btn.minus').click(function(){
        let target_zoom = map.getZoom() -1;
        map.setZoom(target_zoom);
        // map.setMapTypeId('roadmap' );
    });

    $(container).find('.fullscreen-control').click(function(){
        console.log(document.fullscreenElement);
        if (document.fullscreenElement) {
            document.exitFullscreen();
            mapOptions.gestureHandling = 'cooperative';
            map.setOptions(mapOptions);
        } else {
            mapOptions.gestureHandling = 'greedy';
            map.setOptions(mapOptions);
            container.requestFullscreen();
        }
        $('#map').toggleClass('fullscreen');
    });
    $(container).find('.map-type-toggler').click(function(){
        let this_el = $(this);
        if (this_el.hasClass('roadmap') == true) {
            map.setMapTypeId('satellite' );
            this_el.removeClass('roadmap');
            this_el.addClass('satellite');
            this_el.find('.var-text').html('מפת כבישים');
            map.setTilt(0);
        } else {
            map.setMapTypeId('roadmap' );
            this_el.removeClass('satellite');
            this_el.addClass('roadmap');
            this_el.find('.var-text').html('לווין');
            map.setTilt(0);
        }
    });

    add_map_filter_n_clusters();


    function add_map_filter_n_clusters () {
        let static_markers = options.map_settings.static_markers;
        let markers_for_filter = options.filtered_markers;
        let static_markers_on_map  = [];
        let template_1 = popup_templates[0];
        let filter_markers_categories = [];
        let snazzy_info_windows_arr = [];
        let static_markers_keys = Object.keys(static_markers)
        static_markers_keys.forEach(function(key){
            addMarker(static_markers[key]);
        });


        let markers_for_filter_keys = Object.keys(markers_for_filter)
        markers_for_filter_keys.forEach(function(key){
            add_filtered_Marker(markers_for_filter[key]);
        });
        /*        for (i = 0; i < static_markers.length; i++) {
                    addMarker(static_markers[i]);
                }*/

        /*        for (i = 0; i < markers_for_filter.length; i++) {
                    add_filtered_Marker(markers_for_filter[i]);
                }*/
        let markers_clusters = {};
        let markers_list_html = '<div class="filter-list-btn active" data-category=""  data-category-zoom="' + options.map_settings.zoom + '"><span class="marker-ic all"  style="background-image: url(' + options.map_settings.all_category_icon + ')" ></span><div class="move-part"><span class="text">' + get_lang('All points of interest') + '</span></div></div>';

        for (let category in filter_markers_categories) {
            let cluster_obj = {
                url: filter_markers_categories[category][0]['cluster_ic'],
                textColor : 'white',
                textSize : 20,
                width: 48,
                height: 44,
            };
            let  mcOptions = {
                ignoreHidden: true,
                styles: [
                    cluster_obj,
                    cluster_obj,
                    cluster_obj,
                    cluster_obj,
                    cluster_obj
                ]
            };

            let new_cluster =  new MarkerClusterer(map, filter_markers_categories[category], mcOptions);
            markers_clusters[category] = new_cluster;



            let marker_data = filter_markers_categories[category][0];
            markers_list_html += '<div class="filter-list-btn" data-category-zoom="' + marker_data.category_zoom +'" data-category="'+ category +'"><span class="marker-ic" style="background-image: url(' + marker_data.category_ic +')"></span><div class="move-part"><span class="text">' + marker_data.category_title +'</span></div></div>'

        }
        {
            // global cluster
            let cluster_obj = {
                url: 'img/poi_ics/global_c.svg',
                textColor : 'white',
                textSize : 20,
                width: 48,
                height: 44,
            };
            let  mcOptions = {
                ignoreHidden: true,
                styles: [
                    cluster_obj,
                    cluster_obj,
                    cluster_obj,
                    cluster_obj,
                    cluster_obj
                ]
            };
            markers_clusters['all'] = new MarkerClusterer(map, [], mcOptions);
        }


        filter_list.html(markers_list_html);
        let filter_btns = filter_list.find('.filter-list-btn');
        filter_btns.click(function(){
            filter_btns.removeClass('active');
            $(this).addClass('active');
            $($(this).attr('data-category'));
            filterMarkers($(this).attr('data-category'));
            let target_zoom = Number($(this).attr('data-category-zoom'));
            if ($(window).width() > 768) {
                target_zoom = target_zoom;
            } else {
                target_zoom = target_zoom - 2;
            }
            console.log('target_zoom: ' + target_zoom);
            map.setZoom(target_zoom);
            map.setCenter(mapOptions.center);
            snazzy_info_windows_arr.forEach(function(item){
                item.close();
            });
            filter_list_animate ()
            $(container).find('.filter-btn').toggleClass('open');
            $(container).find('.map-container').toggleClass('open');
            directionsRenderer.setMap(null);
        });



        function addMarker(marker) {
            var title = marker.title;
            var pos = new google.maps.LatLng(marker.lat, marker.lng);


            var content =  marker.marker_text;
            var icon_img = new google.maps.MarkerImage();
            icon_img.url = marker.marker_icon;
            {
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                if (urlParams != undefined) {
                    let icon_version = urlParams.get('icon_v');
                    if (icon_version != null) {
                        icon_img.url = 'img/gindi_main_versions/' + icon_version;
                    }
                }
            }
            //icon_img.scaledSize = new google.maps.Size(100 ,100);
            //icon_img.size = new google.maps.Size(100,100);



            marker1 = new google.maps.Marker({
                title: title,
                position: pos,
                map: map,
                icon: icon_img,
                animation: google.maps.Animation.DROP,
                zIndex : 99999999999999999999,
            });

            static_markers_on_map.push(marker1);

            // Marker click listener
            let snazzy_info_window;
            var closeDelayed = false;
            var closeDelayHandler = function() {
                $(snazzy_info_window.getWrapper()).removeClass('active');
                setTimeout(function() {
                    closeDelayed = true;
                    snazzy_info_window.close();
                }, 300);
            };
        }

        function add_filtered_Marker(marker) {
            var title = marker.title; // title
            var category = marker.category;
            var pos = new google.maps.LatLng(marker.lat, marker.lng);
            let go_to_website_text = '<div class="links-btns-wrap"></div>';
            let url_text = marker.web_site_url.replace('https://','').replace('http://','').substr(0, 35);
            if (marker.web_site_url.length > 35) {
                url_text += '...';
            }
            if (marker.web_site_url.length  > 0) {
                go_to_website_text = '<div class="links-btns-wrap"><a class="go-to-website" target="_blank" href="' + marker.web_site_url + '">'  + url_text +'</a></div>';
            }
            let body_text = '';
            if (marker.marker_description.length > 0) {
                body_text = '<div class="text">' + marker.marker_description + '</div>';
            }
            let marker_array = {
                'title' : title,
                'lat' : marker.lat,
                'lng' : marker.lng
            }
            window.markers_poi_array.push(marker_array);

            let route_wrap = '<div class="route-wrap"></div><div class="time-for-route"></div>';
            var content =  body_text + route_wrap + go_to_website_text;
            /*            var icon_img = {
                            url: marker.marker_icon,
                            labelOrigin : new google.maps.Point(30, 75),
                        };*/

            var icon_img = new google.maps.MarkerImage(  );
            icon_img.url = marker.marker_icon;
            //icon_img.labelOrigin = new google.maps.Point(20, 0);
            //icon_img.scaledSize = new google.maps.Size(45,38 * 3);
            // icon_img.size = new google.maps.Size(45,38 * 3);
            icon_img.labelOrigin = new google.maps.Point(18, 55);
            let labelTitle = title;
            if (labelTitle.length > 15) {
                labelTitle = title.substr(0, 15);
                labelTitle += '...';
            }

            marker1 = new google.maps.Marker({
                title: title,
                label : {
                    color : marker_text_color,
                    text : labelTitle,
                    fontWeight : '700',
                    textAlign : center,
                },
                position: pos,
                category: category,
                cluster_ic: marker.cluster_icon,
                category_title :  marker.category_title,
                category_zoom :  marker.category_zoom,
                category_ic: marker.category_img,
                map: map,
                icon: icon_img,
                animation: google.maps.Animation.DROP,
                zIndex : 1,
            });

            if (filter_markers_categories[category] == undefined) {
                filter_markers_categories[category] = [];
            }
            filter_markers_categories[category].push(marker1);
            global_cluster.push(marker1);
            map_filtered_markers_on_map.push(marker1);
            // Marker click listener
            let snazzy_info_window;
            var closeDelayed = false;
            var closeDelayHandler = function() {
                // clearContent(document.querySelector('.snazzy-card__window'));
                removeStyleSheet('openedCardStyle');
                $(snazzy_info_window.getWrapper()).removeClass('active');
                setTimeout(function() {
                    closeDelayed = true;
                    snazzy_info_window.close();
                }, 300);
            };
            snazzy_info_window = new SnazzyInfoWindow({
                marker: marker1,
                wrapperClass: 'custom-window',
                offset: {
                    top: '-72px'
                },
                edgeOffset: {
                    top: 50,
                    right: 60,
                    bottom: 50
                },
                border: false,
                closeButtonMarkup: '<button type="button" class="custom-close"></button>',
                content: template_1({
                    title: title,
                    subtitle: '',
                    bgImg: '',
                    body: content,
                    category_title: marker.category_title,
                    category_icon: marker.category_img,
                    category_color : marker1.category_color,
                    description: marker.marker_description,
                    route: route_wrap,
                    info: go_to_website_text,
                }),
                closeWhenOthersOpen: true,
                panOnOpen : false,
                callbacks: {
                    open: function(e) {

                        const newContainer = document.querySelector('.snazzy-card__window');
                        clearContent(newContainer);
                        directionsRenderer.setMap(null);

                        var wrapper = $(this.getWrapper());

                        let content_container = wrapper.find('.custom-content .route-wrap');
                        let rout_btns_html = '<h4 class="get-route-title"><div class="top-text">Route for This Point:</div><div class="bottom-text"></div></h4>';
                        rout_btns_html += '<div class="route-type-btns">';
                        rout_btns_html += '<div class="change-to-walking route-type-btn" data-type="WALKING"></div>';
                        rout_btns_html += '<div class="change-to-bicycle  route-type-btn" data-type="BICYCLING"></div>';
                        rout_btns_html += '<div class="change-to-driving route-type-btn" data-type="DRIVING"></div></div>';

                        content_container.append(rout_btns_html);
                        let origin_point = new google.maps.LatLng(options.map_settings.lat, options.map_settings.lng);
                        let travel_mode = 'WALKING';
                        let request = {
                            origin: origin_point,
                            destination : this._marker.getPosition(),
                            travelMode : travel_mode
                        };
                        // directionsRenderer.setMap(null);
                        $(container).find('.route-panel').hide();

                        let custom_header_text = wrapper.find('.custom-header').html();

                        if (window.innerWidth > 768){
                            get_route(directionsService,directionsRenderer, request, custom_header_text);
                            content_container.find('.route-type-btn').eq(0).addClass('active');
                            content_container.find('.route-type-btn').click(function(){
                                content_container.find('.route-type-btn').removeClass('active');
                                $(this).addClass('active');
                                request.travelMode = $(this).data('type');
                                get_route(directionsService,directionsRenderer, request, custom_header_text);
                            });
                        } else {
                            get_route(directionsService,directionsRenderer, request, custom_header_text);
                            content_container.find('.route-type-btn').eq(0).addClass('active');
                            content_container.find('.route-type-btn').click(function(){
                                content_container.find('.route-type-btn').removeClass('active');
                                $(this).addClass('active');
                                request.travelMode = $(this).data('type');
                                get_route(directionsService,directionsRenderer, request, custom_header_text);
                            });
                            getRoutesDuration(directionsService,origin_point,this._marker.getPosition());
                        }

                        $(this.getWrapper()).addClass('open');
                        if (marker.marker_description.length == 0 && marker.web_site_url.length  == 0) {
                            $(this.getWrapper()).addClass('min');
                        }




                        let marker_position = this._marker.getPosition();
                        let marker_position_lat = marker_position.lat();
                        let marker_position_lng = marker_position.lng();
                        marker_position_lat = 'rip' + marker_position_lat;
                        marker_position_lat = Number(marker_position_lat.replace('rip',''));
                        marker_position_lng = 'rip' + marker_position_lng;
                        marker_position_lng = Number(marker_position_lng.replace('rip',''));
                        let map_app_url = '';



                        if (marker.info_window_img.length > 5) {
                            let json_array = JSON.parse(marker.info_window_img);
                            let img_html = '<img src="' + json_array.sizes.medium +  '" alt="">';
                            $(container).find('.custom-header-img').html(img_html);
                            $(container).find('.custom-header-wrap').addClass('with-img');
                            $(container).find('.custom-body').addClass('with-img');
                        }
                        var poi_request = {
                            query: custom_header_text,
                            fields: ['name', 'geometry', 'photos', 'formatted_address', 'place_id'],
                            locationBias: {radius: 100, center: {lat: marker_position_lat, lng: marker_position_lng}}
                        };
                        var service = new google.maps.places.PlacesService(map);
                        service.findPlaceFromQuery(poi_request, function(results, status) {
                            if (status === google.maps.places.PlacesServiceStatus.OK) {
                                for (var i = 0; i < results.length; i++) {
                                    if (results[i].photos) {
                                        if (results[i].photos.length > 0) {
                                            if (marker.info_window_img.length < 6) {
                                                let img_html = '<img src="' + results[i].photos[0].getUrl() + '" alt="">';
                                                $(container).find('.custom-header-img').html(img_html);
                                                $(container).find('.custom-header-wrap').addClass('with-img');
                                                $(container).find('.custom-body').addClass('with-img');
                                            }
                                        }
                                    }
                                    var id_request = {
                                        placeId: results[i].place_id,
                                        fields: ['name', 'rating', 'formatted_phone_number', 'geometry', 'url' , 'place_id' ]
                                    };
                                    service.getDetails(id_request, function(details, status){
                                        if (details.formatted_phone_number != undefined) {
                                            if (details.formatted_phone_number.length > 0) {
                                                $(container).find('.links-btns-wrap .phone-btn').remove();
                                                if (detect_mobile()) {
                                                    $(container).find('.links-btns-wrap').append(`<a class="phone-btn circle-btn" href="tel:${details.formatted_phone_number}">${details.formatted_phone_number}</a>`);
                                                } else {
                                                    $(container).find('.links-btns-wrap').append(`<div class="phone-btn circle-btn" >${details.formatted_phone_number}</div>`);
                                                }

                                            }
                                        }
                                        $(container).find('.links-btns-wrap .map-place').remove();
                                        if ((navigator.platform.indexOf("iPhone") != -1) ||
                                          (navigator.platform.indexOf("iPad") != -1) ||
                                          (navigator.platform.indexOf("iPod") != -1)) {
                                            //map_app_url = 'http://maps.apple.com/?ll=' + marker_position_lat +','+ marker_position_lng;
                                            map_app_url = `https://www.google.com/maps?f=d&daddr=${marker_position_lat +','+ marker_position_lng}`;
                                            $(container).find('.links-btns-wrap').append(`<a class="map-place circle-btn" target="_blank" href="${map_app_url}">${get_lang('Navigate to')}</a>`);

                                        } else {
                                            // https://www.google.com/maps?f=d&saddr=Thompson+St,+New+York,+NY,+USA&daddr=Wooster+St,+New+York,+NY,+USA&dirflg=d
                                            map_app_url = `https://www.google.com/maps?f=d&daddr=${marker_position_lat +','+ marker_position_lng}`;
                                            $(container).find('.links-btns-wrap').append(`<a class="map-place circle-btn" target="_blank" href="${map_app_url}">${get_lang('Navigate to')}</a>`);
                                        }
                                    })

                                }
                            }
                        });

                        /*                        if ($(window).width() < 992 ) {*/
                        let text = wrapper.find('.text');
                        let img =  wrapper.find('.custom-header-img img');
                        let coef = 3;
                        if (text.length > 0 || img.length > 0) {
                            coef = 3;
                        }  else {
                            coef = 5;
                        }
                        let map_bounds = map.getBounds();
                        let top = map_bounds.getNorthEast().lat();
                        let bottom = map_bounds.getSouthWest().lat();
                        let map_lat_bottom = bottom;
                        let map_lat_top = top;
                        let difference_quoter = (map_lat_top - map_lat_bottom) / coef;
                        let marker_position_lat_cor = marker_position_lat + difference_quoter;

                        if (window.innerWidth <=768){
                            newContainer.appendChild(wrapper[0]);
                            const cont = document.querySelector('.custom-content');
                            cont.addEventListener('touchstart', handleTouchStart, false);
                            cont.addEventListener('touchmove', handleTouchMove, false);
                            map.panTo({lat  : marker_position_lat , lng:marker_position_lng });
                        } else {
                            map.panTo({lat  : marker_position_lat_cor , lng:marker_position_lng });
                        }

                        /*                        } else {
                                                    map.panTo({lat  : marker_position_lat , lng:marker_position_lng });
                                                }*/

                    },
                    afterOpen: function() {
                        var wrapper = $(this.getWrapper());
                        wrapper.addClass('active');
                        wrapper.find('.custom-close').on('click', ()=>{
                            closeDelayHandler();
                            clearContent(document.querySelector('.snazzy-card__window'));
                            directionsRenderer.setMap(null);
                        });
                    },
                    beforeClose: function() {
                        // $(container).find('.route-panel').hide();
                        // directionsRenderer.setMap(null);
                        if (!closeDelayed) {

                            closeDelayHandler();

                            return false;
                        }

                        return true;
                    },
                    afterClose: function() {
                        var wrapper = $(this.getWrapper());
                        wrapper.find('.custom-close').off();
                        wrapper.removeClass('open');
                        wrapper.removeClass('min');
                        closeDelayed = false;

                    },
                }
            });

            function removeStyleSheet (id) {
                const style = document.getElementById(id);
                if (style){
                    style.remove();
                }
            }

            function getTouches(evt) {
                return evt.touches ||             // browser API
                  evt.originalEvent.touches; // jQuery
            }

            function handleTouchStart(evt) {
                const firstTouch = getTouches(evt)[0];
                xDown = firstTouch.clientX;
                yDown = firstTouch.clientY;
            }

            function handleTouchMove(evt) {
                if ( ! xDown || ! yDown ) {
                    return;
                }

                var xUp = evt.touches[0].clientX;
                var yUp = evt.touches[0].clientY;

                var xDiff = xDown - xUp;
                var yDiff = yDown - yUp;

                if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/
                    if ( xDiff > 0 ) {
                        /* left swipe */
                    } else {
                        /* right swipe */
                    }
                } else {
                    if ( yDiff > 0 ) {
                        const isLoaded = document.getElementById('openedCardStyle');
                        if (!isLoaded){
                            document.head.innerHTML +='<style id="openedCardStyle">'+mobileOpenedCard+'</style>';
                        }

                        let start;
                        const card = document.querySelector('.map-parent .custom-window');

                        function openFullscreenCard (timestamp) {
                            if (start === undefined)
                                start = timestamp;
                            const elapsed = (timestamp - start) / 2;
                            card.style.height = elapsed +'vh';
                            console.log('anim');

                            if (elapsed < 100){
                                window.requestAnimationFrame(openFullscreenCard);
                            } else {
                                card.style.height = '100vh';
                            }
                        }
                        window.requestAnimationFrame(openFullscreenCard);



                        /* up swipe */
                    } else {
                        closeDelayHandler();
                        directionsRenderer.setMap(null);
                        clearContent(document.querySelector('.snazzy-card__window'));
                        /* down swipe */
                    }
                }
                /* reset values */
                xDown = null;
                yDown = null;
            }
            snazzy_info_windows_arr.push(snazzy_info_window);
            /*        google.maps.event.addListener(marker1, 'click', (function (marker1, content) {
                        return function () {
                            console.log('Gmarker 1 gets pushed');
                            // infowindow.setContent(content);
                            //infowindow.open(map, marker1);
                            snazzy_info_window.open(map, marker1);
                            // map.panTo(this.getPosition());
                        }
                    })(marker1, content));*/
        }


        filterMarkers = function (category) {
            if (category.length === 0) {
                for (let category in filter_markers_categories) {
                    markers_clusters[category].clearMarkers();
                }
                markers_clusters['all'].addMarkers(global_cluster);
            } else {
                markers_clusters['all'].clearMarkers();
                for (let category in filter_markers_categories) {
                    markers_clusters[category].addMarkers( filter_markers_categories[category]);
                }
            }
            for (i = 0; i < map_filtered_markers_on_map.length; i++) {
                marker = map_filtered_markers_on_map[i];
                // If is same category or category not picked
                if (marker.category == category || category.length === 0) {
                    marker.setVisible(true);
                    marker.setAnimation(google.maps.Animation.DROP);
                }
                // Categories don't match
                else {
                    marker.setVisible(false);
                }
            }
            for (let cluster in markers_clusters) {
                markers_clusters[cluster].repaint();
            }
        };


        function getRoutesDuration (directionsService,originPoint,destination) {
            const routesMethods =['DRIVING','BICYCLING','WALKING'];
            const htmlArr =[];
            htmlArr.length = 2;
            let routesHtml='';
            const timeForRouteContainer = document.querySelector('.time-for-route');
            routesMethods.forEach((routeMethod, index) =>{
                const request = {
                    origin: originPoint,
                    destination : destination,
                    travelMode : routeMethod
                };
                directionsService.route(request, (response, status)=>{
                   if (status === 'OK') {
                       const duration = response.routes[0].legs[0].duration.value;
                       if (duration > 60) {
                           routesHtml = ' <div class="route__'+routeMethod.toLowerCase()+'"><span class="number"> ' + Math.round(duration / 60)  + '</span><span class="word">' + get_lang('minutes') + '</span></div>';
                       } else {
                           routesHtml = ' <div class="route__'+routeMethod.toLowerCase()+'"><span' +
                             ' class="number">' + duration + ' </span><span class="word">' + get_lang('seconds') + ' </span></div>';
                       }
                       htmlArr[index] = routesHtml;

                   } else{
                       routesHtml = ' <div class="route__'+routeMethod.toLowerCase()+'"><span' +
                         ' class="number">0</span><span' +
                         ' class="word">' + get_lang('minutes') + '</span></div>';

                       htmlArr[index] = routesHtml;

                   }
                });
            });
            setTimeout(()=>{
                    timeForRouteContainer.innerHTML = htmlArr.join('');
            },500);
        }
        
        function get_route (directionsService,directionsRenderer, request , title) {
            directionsRenderer.setMap(map);
            directionsService.route(request , function(response, status) {
                if (status === 'OK') {

                    directionsRenderer.setDirections(response);
                    window.map_route = response;
                    var leg = response.routes[0].legs[0];
                    var route = response.routes[0];
                    var summaryPanel = $(container).find('.route-panel')[0];
                    $(container).find('.route-panel').empty();
                    // $(container).find('.route-panel').show();

                    summaryPanel.innerHTML = '';

                    for (var i = 0; i < route.legs.length; i++) {
                        var routeSegment = i + 1;
                        let route_html = '';
                        route_html += '<b>Route to: ' + title +
                          '</b><br>';
                        route_html += '<b>Distance: ' + route.legs[i].distance.text + '</b><br>';
                        let distance_value = route.legs[i].distance.value;
                        let distance_html = '';
                        if (distance_value > 1000) {
                            distance_html = ' <div class="row"><span class="word">' + get_lang('km') +' </span><span class="number">' + Math.floor(distance_value / 100) / 10 + '</span></div>';
                        } else {
                            distance_html = ' <div class="row"><span class="word">' + get_lang('meter') +' </span><span class="number">' + distance_value + ' </span></div>';
                        }
                        let duration_value = route.legs[i].duration.value;
                        let duration_html = '';
                        if (duration_value > 60) {
                            duration_html = ' <div class="row"><span class="word">' + get_lang('minutes') + '</span><span class="number"> ' + Math.round(duration_value / 60)  + '</span></div>';
                        } else {
                            duration_html = ' <div class="row"><span class="word">' + get_lang('seconds') + ' </span><span class="number">' + duration_value + ' </span></div>';
                        }
                        $(container).find('.get-route-title .bottom-text').html( distance_html + '<div' +
                          ' class="middle"> . </div>' + duration_html);
                        if (request.travelMode == 'WALKING') {
                            route_html += '<b>Travel mode: walking</b><br>';
                            $(container).find('.get-route-title .top-text').html(get_lang ('Walking route to this place'));
                        } else if (request.travelMode == 'BICYCLING') {
                            route_html += '<b>Travel mode: bicycling</b><br>';
                            $(container).find('.get-route-title .top-text').html(get_lang ('Cycling route to this place'));
                        } else if (request.travelMode == 'DRIVING') {
                            route_html += '<b>Travel mode: driving</b><br>';
                            $(container).find('.get-route-title .top-text').html(get_lang ('Car route to this place'));
                        }
                        summaryPanel.innerHTML = route_html;
                    }

                } else {
                    // window.alert('Directions request failed due to ' + status);
                }
            });
        }

        filterMarkers('');

        function makeMarker(position, icon, title, map) {
            new google.maps.Marker({
                position: position,
                map: map,
                icon: icon,
                title: title
            });
        }
    };


    return experimental_map_obj;
}











function project(latLng) {
    let TILE_SIZE = 256;

    let siny = Math.sin(latLng.lat() * Math.PI / 180);

    // Truncating to 0.9999 effectively limits latitude to 89.189. This is
    // about a third of a tile past the edge of the world tile.
    siny = Math.min(Math.max(siny, -0.9999), 0.9999);

    return new google.maps.Point(
      TILE_SIZE * (0.5 + latLng.lng() / 360),
      TILE_SIZE * (0.5 - Math.log((1 + siny) / (1 - siny)) / (4 * Math.PI)))
}

function getPixel(latLng, zoom) {
    let scale = 1 << zoom;
    let worldCoordinate = project(latLng);
    return new google.maps.Point(
      Math.floor(worldCoordinate.x * scale),
      Math.floor(worldCoordinate.y * scale))
}

function getMapDimenInPixels(map) {
    let zoom = map.getZoom();
    let bounds = map.getBounds();
    let southWestPixel = getPixel(bounds.getSouthWest(), zoom);
    let northEastPixel = getPixel(bounds.getNorthEast(), zoom);
    return {
        width: Math.abs(southWestPixel.x - northEastPixel.x),
        height: Math.abs(southWestPixel.y - northEastPixel.y)
    }
}

function willAnimatePanTo(map, destLatLng, optionalZoomLevel) {
    let dimen = getMapDimenInPixels(map);

    let mapCenter = map.getCenter();
    optionalZoomLevel = !!optionalZoomLevel ? optionalZoomLevel : map.getZoom();

    let destPixel = getPixel(destLatLng, optionalZoomLevel);
    let mapPixel = getPixel(mapCenter, optionalZoomLevel);
    let diffX = Math.abs(destPixel.x - mapPixel.x);
    let diffY = Math.abs(destPixel.y - mapPixel.y);

    return diffX < dimen.width && diffY < dimen.height
}

function getOptimalZoomOut(latLng, currentZoom) {
    if(willAnimatePanTo(map, latLng, currentZoom - 1)) {
        return currentZoom - 1
    } else if(willAnimatePanTo(map, latLng, currentZoom - 2)) {
        return currentZoom - 2
    } else {
        return currentZoom - 3
    }
}

function smoothlyAnimatePanToWorkarround(map, destLatLng, optionalAnimationEndCallback) {
    let initialZoom = map.getZoom();
    let listener;

    function zoomIn() {
        map.setZoom(mapGlobalOption.map_settings.zoom);
        google.maps.event.removeListener(listener);
        //here you should (re?)enable only the ui controls that make sense to your app
        map.setOptions({draggable: true, zoomControl: true, scrollwheel: true, disableDoubleClickZoom: false});
    }

    function zoomOut() {
        if(willAnimatePanTo(map, destLatLng)) {
            google.maps.event.removeListener(listener);
            listener = google.maps.event.addListener(map, 'idle', zoomIn);
            map.panTo(destLatLng)
        } else {
            map.setZoom(getOptimalZoomOut(destLatLng, map.getZoom()));
        }
    }

    //here you should disable all the ui controls that your app uses
    map.setOptions({draggable: false, zoomControl: false, scrollwheel: false, disableDoubleClickZoom: true});
    map.setZoom(getOptimalZoomOut(destLatLng, initialZoom));
    listener = google.maps.event.addListener(map, 'idle', zoomOut);
}

function smoothlyAnimatePanTo(map, destLatLng) {
    if(willAnimatePanTo(map, destLatLng)) {
        map.panTo(destLatLng)
        map.setZoom(mapGlobalOption.map_settings.zoom);
    } else {
        smoothlyAnimatePanToWorkarround(map, destLatLng);
    }
}



const hb1 =`
<div class="custom-img" style="background-image: url({{{bgImg}}})"></div>
        <section class="custom-content">
            <h1 class="custom-header" style="background-color: {{{category_color}}};">
                {{title}}
            </h1>
            <div class="custom-body">{{{body}}}</div>
        </section>
`;

const hb2 = `
<section class="custom-content">
            <div class="custom-header-wrap">
                <div class="custom-header-img"></div>
            </div>
            <div class="custom-content__wrapper">
                <div class="custom-title">
                    <h1 class="custom-header">{{title}}</h1>
                </div>
                <div class="custom-category">
                    <div class="custom-category__img-container">
                        <img class="custom-category__img" src="{{{category_icon}}}" alt="category icon">
                    </div>
                    <h3 class="category-title">{{category_title}}</h3>
                </div>
                <div class="custom-description">
                    <p class="custom-description__text">{{description}}</p>
                </div>
                <div class="custom-route">{{{route}}}</div>
                <div class="custom-info">{{{info}}}</div>
          
            </div>
        </section>
`;

const dictionary = {
    'Walking route to this place' : {
        'en' : '',
        'he' : ''
    },
    'Cycling route to this place' : {
        'en' : '',
        'he' : ''
    },
    'Car route to this place' : {
        'en' : '',
        'he' : ''
    },
    'Navigate to' : {
        'en' : 'Navigate to',
        'he' : 'נווט אל'
    },
    'meter' : {
        'en' : 'm',
        'he' : 'מטר'
    },
    'km' : {
        'en' : 'km',
        'he' : 'ק"מ'
    },
    'seconds' : {
        'en' : 'sec',
        'he' : 'שניות'
    },
    'minutes' : {
        'en' : 'mins',
        'he' : 'דקות'
    },
    'All points of interest' : {
        'en' : 'All points of interest',
        'he' : 'כל נקודות עניין'
    },
};

const styleCss = `

/* variaables */
/*
:root {

--section-title-fs: 75px;
--section-title-lh: 98px;

--section-text-fs: 24px;
    --section-text-lh: 40px;
}
*/

/* variaables */


/* common selectors  */

@keyframes video_play {
0% {
transform: scale(0);
opacity: 0;
}
30% {
opacity: 1;
}
100% {
transform: scale(1.2);
opacity: 0;
}

}

ul{
padding: 0;
margin: 0;
}

a{
text-decoration: none;
}

body{
font-family: 'Ubuntu', sans-serif;
background: #111114;
margin: 0 auto;
max-width: 100%;
min-width: 300px;
overflow-x: hidden;
}

html {
position: relative;
}

section{
background: #000000;
margin-top: 30px;
}


h2{
font-style: normal;
font-weight: 500;
font-size: 60px;
line-height: 1.5;
color: #FFFFFF;
}

.section-subtitle{
font-size: 20px;
line-height: 27px;
text-transform: uppercase;
}



.section-text-big{
letter-spacing: 0.2px;
color: #CCCCCC;
font-size: 20px;
line-height: 30px;
}


.section-item-title{

font-style: normal;
font-weight: bold;
font-size: 24px;
line-height: 34px;
color: #FFFFFF;

}


.section-text-gray{
font-style: normal;
font-weight: normal;
font-size: 18px;
line-height: 27px;
color: #CCCCCC;
}

.section-text-white{
font-style: normal;
font-weight: normal;
font-size: 16px;
line-height: 27px;
color: #FFFFFF;
}

.btn-text{
font-size: 16px;
line-height: 21px;
text-align: center;
color: #FFFFFF;
display: block;
margin: auto 0;
}

.btn-blue{
width: 103px;
height: 84px;
background: #3134FD;
text-align: center;
align-items: center;
cursor: pointer;
}

/* common selectors  */



/* .carousel.fading */


.carousel.fade {
opacity: 1;
}
.carousel.fade .item {
-moz-transition: opacity ease-in-out .7s;
-o-transition: opacity ease-in-out .7s;
-webkit-transition: opacity ease-in-out .7s;
transition: opacity ease-in-out .7s;
left: 0 !important;
opacity: 0;
top:0;
position:absolute;
width: 100%;
display:block !important;
z-index:1;
}
.carousel.fade .item:first-child {
top:auto;
position:relative;
}
.carousel.fade .item.active {
opacity: 1;
-moz-transition: opacity ease-in-out .7s;
-o-transition: opacity ease-in-out .7s;
-webkit-transition: opacity ease-in-out .7s;
transition: opacity ease-in-out .7s;
z-index:2;
}

/* .carousel.fading */





.bgvideo {width: 100%;height: 100%;}

.bgvideo source {
object-fit: cover;
}


#bgvideo-container{
background-repeat: no-repeat;
background-size: contain;
}

.bgvideo-no{
background: url(./images/video-bg-poster.jpg)!important;
background-repeat: no-repeat!important;
background-size: cover!important;
width: calc(100% + 30px);
left: -15px;
position: relative;
background-position: center;
height: 100vh;
}


.bgvideo-2 {
width: 100%;
}



.flex{
display: flex;
justify-content: center;
flex-wrap: wrap;
}

.my-container{
margin: 0 auto;
padding: 0 40px;
}

header{
height: auto;
background-repeat: no-repeat;
background-position: center;
position: fixed;
z-index: 9999;
background-color: black;
top: 0;
left: 0;
height: auto;
width: 100%;
}


#header-btns-block .default{
margin-right: 25px;
display: flex;
flex-direction: column;
justify-content: center;
}

#header-btns-block .default.model {
background-color: #603ef2;
}

.btn-new{
height: 35px;
padding: 0 24px;
border-radius: 25px;
border: none;
outline: none;
transition: 0.5s;
}

.btn-new:hover {
transform: scale(1.1);
}

.btn-new.fiolet{
color: #fff;
background-color: rgb(96, 62, 242);
}

.btn-new.get-app {
display: flex;
padding: 0 14px 0px 20px;
width: 143px;
justify-content: center;
font-size: 16px;
font-weight: 300;
}

div#header-btns-block {
display: flex;
}

.btn-new.get-app img {
margin: auto 7px;
width: 15px;
height: 18px;
}

.btn-new.get-app img.apple-ic {
margin-bottom: auto;
margin-left: 5px;
margin-right: 2px;
margin-top: auto;
width: 17px;
height: 15px;
}

.btn-new.default{
color: white;
background-color: #323743;
font-size: 16px;
}



#header-wrap{
align-items: center;
justify-content: space-between;
padding: 0;
top: 0;
height: 60px;
z-index: 999999;
/* background: rgba(0,0,0,0.7); */
max-width: 1440px;
margin: auto;
transition: all .7s;
}


#header-logo img{
/*margin-top: 15px;*/
}

.header-top-fixed{
/* background: rgba(0, 0, 0, 1)!important; */
}


#get-demo{
position: absolute;
right: 25px;
top: 0;
width: 90px;
height: 69px;
}


#get-demo-svg{
margin-bottom: 5px;
}

#get-demo-svg img{
width: 25px;
height: 25px;
}

#header-right{
/*padding-right: 150px;*/
width: 40%;
}

#header-right .header-right-desktop{
justify-content: space-between;
align-items: center;
}

.header-right-mobile{
display: none;
}

.header-right-mobile img{
cursor: pointer;
z-index: 999;
position: relative;
}


#header-menu li{
display: inline-block;
}

#header-menu li:not(:last-child){
margin-right: 50px;
}

#header-menu li a{
display: inline-block;
font-family: 'Ubuntu', sans-serif;
font-style: normal;
font-weight: normal;
font-size: 15px;
line-height: 20px;
letter-spacing: 0.16px;
color: #E6E6E6;
text-decoration: none;
border-bottom: 2px solid transparent;
transition: all 0.6s;
text-transform: uppercase;
position: relative;

}

#header-menu li a.get-app-ancor {}

#header-menu li a.get-app-ancor .text {
color: white;
}

#header-menu li a.get-app-ancor img {
width: 13px;
height: 13px;
object-fit: contain;
margin: auto 2px;
position: relative;
top: -1px;
}

#header-menu li a.get-app-ancor img.apple-ic {
width: 13px;
height: 16px;
padding-bottom: 3px;
position: relative;
top: -1px;
}

@-webkit-keyframes headerBorderBottom {

0% {
width: 0%;
}

100% {
width: 100%;
}
}

#header-menu{
padding-top: 7px;
width: 100%;
display: flex;
justify-content: space-between;
}

#header-menu li a:hover{
}
#header-menu li a.active::after,
#header-menu li a:hover::after{
position: absolute;
bottom: -7px;
left: 0;
width: 100%;
height: 2px;
background: #603ef2;
content: "";
animation: headerBorderBottom 0.7s;
}


.social{
position: absolute;
bottom: 25px;
right: 45px;
}


header .center{
display: none;
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
text-align: center;
min-width: 200px;
}

header .bottom {
display: flex;
align-items: center;
justify-content: center;
width: fit-content;
margin: 50px auto 0 auto;
cursor: pointer;
}





header .bottom .text{
transform: translateX(21px);
font-family: 'Ubuntu', sans-serif;
font-style: normal;
font-weight: 600;
font-size: 16px;
line-height: 27px;
letter-spacing: 0.8px;
text-transform: uppercase;
color: #FFFFFF;
}

.content-wrap{
position: relative;
z-index: 1005;
/* background: #101010; */
/* padding: 0 15px; */
overflow: initial;
max-width: 100vw;
overflow-x: hidden;
}

section#tour-360{
justify-content: space-between;
height: 700px;
background: transparent;

}


#tour-360 .right{
align-items: flex-end;
background-size: cover;
height: 100%;
width: 50%;
position: relative;
background: #000;
}

#tour-360 .right img.device{
width: 80%;
}


#tour-360 .right .take-tour-btn{
position: absolute;
outline: none;
border: none;
bottom: 50px;
left: -15px;
z-index: 999999;
}

#tour-360 .right .take-tour-btn span{
margin-top: 7px;
}

#tour-360 .left{
width: calc(50% - 30px);
background: #000;
align-items: center;
padding-left: 40px;
justify-content: end;
}


#tour-360 .left .content{

}


#tour-360 .left .content p{
font-style: normal;
font-weight: 600;
font-size: 20px;
line-height: 27px;
text-transform: uppercase;
color: #FFFFFF;
margin: 0;
}


#tour-360 .left .content .text{
margin-top: 30px;
max-width: 450px;
}


#carousel-tour-360{
width: 100%;
}


#carousel-tour-360 .item-wrap{
height: 700px;
justify-content: space-between;
}

#carousel-tour-360 .panoramaFull{
width: 100%;
}

#carousel-tour-360 canvas{
cursor: grab;
}

.panorama-close-btn{
display: none;
position: absolute;
top: 30px;
right: 30px;
width: 45px;
height: 45px;
background: transparent;
border: 1px solid #fff;
transition: all 0.5s;
}

.panorama-close-btn:hover{
background: #3134FD;
border: 1px solid #3134FD;
}

section#our-features{
background: #000;
padding: 50px 0;
}

#our-features h2{
text-align: center;
margin-bottom: 15px;
}

#carousel{
margin-top: 50px;
}

#carousel .item img{
width: 700px;
}

.carousel-img{
text-align: center;
}

#carousel .item{
height: 700px;
}



#carousel .carousel-img-container img{
width: 750px;
margin-top: 50px;
}




#carousel .item h3{

text-align: center;
}


#carousel-control{
width: 100%;
position: relative;
}

.carousel-control-next-container{
width: 100%;
max-width: 500px;
margin: 0 auto;
position: absolute;
top: 55px;
left: 50%;
text-align: right;
transform: translateX(-50%);
}

.next-feature-btn{
display: none;
cursor: pointer;
width: 90px;
height: 60px;
background: #3134FD;
text-align: center;
align-items: center;
cursor: pointer;
outline: none;
border: none;
}

.next-feature-btn img{
width: 20px;
margin-bottom: 3px;
}

.next-feature-btn span{

}


#carousel-control .flex{
justify-content: space-between;
}

#carousel-control .carousel-control-item{
width: 20%;
cursor: pointer;
}

#carousel-control .control-item-border-top{
height: 2px;
width: 100%;
background: #3E3A3A;
margin-bottom: 25px;

}

#carousel-control .active .control-item-border-top {
/*background: #3134FD;*/
}


@-webkit-keyframes borderTop {

0% {
width: 0%;
}

100% {
width: 100%;
}
}


#carousel-control .carousel-control-active .control-item-border-top{
background: #3134FD;
animation: borderTop 20s;
}

#carousel-control .control-item-title{

margin: 15px 0;
}


#carousel-control .control-item-text{

}



section#testimonials{

padding: 50px 0 100px 0;
position: relative;

}

#carousel-testimonials-inner-mobile{
display: none;
}

#carousel-indicators-testimonials-mobile{
display: none;
}


#testimonials-video-block{
width: 100%;
margin: 50px auto;
position: relative;
}

#testimonials-video-block video{
width: 70%;
}


#testimonials-video-block .icon_btn_play{
position: absolute;
top: 50%;
transform: translateY(-50%);
cursor: pointer;
z-index: 99;
}


#testimonials h2{

text-align: center;

}


.testimonials-slide{
position: relative;
}


.testimonials-video video{
width: 70%;
max-height: 450px;
margin: 50px auto;
}



.play-bg-video-2{
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
cursor: pointer;
}


.play-bg-video-2 .text{
display: inline-block;
transform: translateX(21px);
font-family: 'Ubuntu', sans-serif;
font-style: normal;
font-weight: 600;
font-size: 16px;
line-height: 27px;
letter-spacing: 0.8px;
text-transform: uppercase;
color: #FFFFFF;

}


#carousel-control-testimonials {
margin: 25px auto;
}

#carousel-testimonials{
display: block!important;
}
#carousel-indicators-testimonials{
display: block!important;
}


#carousel-testimonials-mobile{
display: none!important;
}

#carousel-indicators-testimonials-mobile{
display: none!important;
}



#carousel-control-testimonials .my-container{
justify-content: space-between;
}


#carousel-testimonials{
margin: 75px auto 50px auto;
}


#carousel-testimonials .item .my-container{
justify-content: space-around;
}

.carousel-testimonials-item-block{
width: 25%;
}


.carousel-testimonials-item-block  .section-text-big{
margin-bottom: 25px;
}


.carousel-testimonials-item-block .section-item-title{
margin-bottom: 10px;

}

.carousel-control-testimonials-item .client-testimonials{
color: #FFFFFF;
margin-bottom: 25px;
}


.carousel-control-testimonials-item .client-name{

margin-bottom: 10px;
}



.carousel-control-testimonials-item .client-desc{

}


#carousel-indicators-testimonials, #carousel-indicators-testimonials-mobile{
position: relative;
display: block;
width: 100%;
margin: 0!important;
left: auto;
bottom: auto;
}

#carousel-indicators-tour-360{
height: 36.5px;
margin: 0px!important;
width: auto;
text-align: left;
bottom: 40px;
left: 60px;
position: absolute;
z-index: 99999;
border-bottom: 1.5px solid #666!important;
}

#carousel-indicators-tour-360 li{
width: auto;
height: auto;
margin: 0!important;
border: none!important;
display: inline;
color: #fff;
font-weight: 500;
font-size: 18px;
line-height: 27px;
padding: 0 0 10px 0!important;
}

#carousel-indicators-tour-360 li:not(:last-child){
margin-right: 30px!important;
}

#carousel-indicators-tour-360 li.active{
background: transparent!important;
border-bottom: 1.5px solid #FFFFFF!important;
border-radius: 0;
}


#carousel-indicators-testimonials, #carousel-indicators-tour-360{
margin-bottom: 25px;
}


#carousel-indicators-testimonials li.active, #carousel-indicators-testimonials-mobile li.active, #carousel-indicators-tour-360 li.active{
background-color: #3134FD;
border: 1px solid #3134FD;
margin: 0 5px;
}

#carousel-indicators-testimonials li, #carousel-indicators-testimonials-mobile li{
width: 12px;
height: 12px;
margin: 0 5px;
border: 1px solid #979797;

}


#glasses canvas{
background-image: url("./images/glasses-wrap.png");
background-size: cover;
background-repeat: no-repeat;
}

#slide-dreams{

justify-content: flex-end;
}


section#about-us {
padding: 50px 0;
color: #fff;
min-height: calc(100vh - 100px);
overflow: hidden;
display: flex;
flex-direction: column;
justify-content: center;
}

#about-us .content{
margin: 50px 50px 50px 0;
align-items: center;
justify-content: space-between;
position: relative;
margin: 0;
margin: auto 0;
}


#about-us .content .left{
margin-bottom: 75px;
position: relative;
z-index: 2;
margin-bottom: auto;
margin-top: auto;
}
#about-us .content .left .mobile-img {
display: none;
}

#about-us .content .right{
margin-left: auto;
}

#about-us .content .left .powered {

}

#about-us .content .left .bmby{
text-transform: uppercase;
font-weight: bold;
font-size: 60px;
line-height: 70px;
margin-bottom: 25px;

}


#about-us .why-choose-us{

margin-top: 100px;

display: none;
}

#about-us .why-choose-us .content{
width: 100%;
display: flex;
justify-content: space-between;
}

#about-us .why-choose-us .content .item{
width: 30%;
position: relative;
}

#about-us .why-choose-us .content .item .back-numbers{
position: absolute;
top: -40px;
left: 0;
font-size: 190px;
line-height: 80%;
z-index: 0;
font-weight: bold;
letter-spacing: 15px;
color: #212121;
}

#about-us .why-choose-us .content .item .top{
margin-bottom: 30px;
position: relative;
z-index: 1;
}
#about-us .why-choose-us .content .item .number,
#about-us .why-choose-us .content .item .title{
display: inline-block;
font-size: 30px;
line-height: 28px;
}

#about-us .why-choose-us .content .item .number{
font-weight: bold;
margin-right: 15px;
}

#about-us .why-choose-us .content .item .text{
font-size: 20px;
line-height: 30px;
position: relative;
z-index: 4;
}



/* =============  #map ===============*/


#map{
width: 100%;
height: calc(100vh - 60px);
}

#map.fullscreen {
height: 100vh;
}

.google-map h3 {
margin: 0;
margin-bottom: 10px;
text-align: center;
}

.google-map .text {
line-height: 1.5;
font-size: 15px;
width: 300px;
text-align: center;
}




/* =============  #gallery ===============*/
#gallery {
padding: 75px 0;
}

#gallery h2{
text-align: center;
text-transform: uppercase;
}

#gallery .gallery-wrap{

overflow: hidden;

width: 100%;

margin: auto;
}

#gallery .gallery-content{
height: auto;
padding-bottom: 60px;
user-select: none;
display: flex;
flex-direction: column;
}

#gallery .gallery-wrap .gallery-cats{
width: 100%;
display: flex;
justify-content: center;
margin: 50px auto 50px auto;
flex-wrap: wrap;
}

#gallery .gallery-wrap .gallery-cats a{
font-size: 25px;
line-height: 28px;
color: #fff;
text-decoration: none;
padding-bottom: 10px;
border-bottom: 2px solid transparent;
transition: all .7s;
margin-left: 20px;
margin-right: 20px;
}


#gallery .gallery-wrap .gallery-cats a:hover,
#gallery .gallery-wrap .gallery-cats a.active{
border-bottom: 2px solid #fff;
}

#gallery .gallery-wrap .swiper-gallery.active{
visibility: visible;
order: 1;
}
#gallery .swiper-container {

height: calc(57vw / 16 * 9);

width: 57vw;

overflow: initial;
}

#gallery .gallery-wrap .swiper-gallery:not(.active){
visibility: hidden;
height: 0px;
order: 0;
transition-property: height;
}

#gallery .gallery-wrap .swiper-gallery img{
}

#gallery .gallery-wrap .swiper-gallery .swiper-slide{
text-align: center;
transform: scale(0.7);
transition: 0.5s;
position: relative;
}

#gallery .gallery-wrap .swiper-gallery .swiper-slide.with-360 {
cursor: pointer;
}
#gallery .gallery-wrap .swiper-gallery .swiper-slide .ic-360 {

width: 55px;

height: 55px;

position: absolute;

left: 50%;

top: 50%;

background-image: url(./img/ic_360.svg);

background-position: center;

background-repeat: no-repeat;

background-size: cover;

transform: translate(-50%, -50%);
}

#gallery .gallery-wrap .swiper-gallery .swiper-slide img {
width: 100%;
height: 100%;
object-fit: cover;
max-width: initial!important;
}

#gallery .gallery-wrap .swiper-gallery .swiper-slide.swiper-slide-active {
transform: scale(1);
}


#gallery .gallery-wrap .swiper-gallery .gallery-img-title{
position: absolute;
bottom: -70px;
left: 0;
width: 100%;
text-align: center;
color: #fff;
margin: 0;
background: rgba(0,0,0,0.5);
font-size: 20px;
padding: 6px;
}


#gallery .gallery-wrap .swiper-gallery .gallery-img-title span{
margin: 0 20px;
}


#gallery .gallery-wrap .swiper-gallery .gallery-img-title img{
cursor: pointer;
}


#gallery .gallery-wrap .swiper-gallery .gallery-img-title .swiper-button-next,
#gallery .gallery-wrap .swiper-gallery .gallery-img-title .swiper-button-prev{
width: auto;
height: auto;
position: relative;
display: inline-block;
top: auto;
left: auto;
right: auto;
margin-top: 0;
}



#gallery .gallery-wrap .swiper-gallery .swiper-slide.swiper-slide-prev{
text-align: right;
transform-origin: right;
padding-right: 60px;
}

#gallery .gallery-wrap .swiper-gallery .swiper-slide.swiper-slide-next{
text-align: left;
transform-origin: left;
padding-left: 60px;
}


#gallery .gallery-wrap .swiper-gallery .swiper-slide:not(.swiper-slide-active) img{
max-width: 80%;
opacity: 0.5;
-moz-opacity: 0.8;
filter: alpha(opacity=80) black;
-khtml-opacity: 0.8;
background-color: #000;
}


#gallery .gallery-wrap .swiper-gallery .swiper-pagination{
position: relative;
margin-top: 80px;
left: 0;
bottom: 0;
display: flex;
justify-content: center;
}


#gallery .gallery-wrap .swiper-gallery .swiper-pagination-bullet.swiper-pagination-bullet-active{
background: #603EF2;
border-radius: 0;
margin: 0;
}

#gallery .gallery-wrap .swiper-gallery .swiper-pagination-bullet{
background: #fff;
width: 50px;
border-radius: 0;
margin: 0;
transition: 0.5s;
height: 3px;
}


/*
#carousel-gallery {
height: 600px;
}


#carousel-gallery .item{
text-align: center;
}

#carousel-gallery .item.active{
width: 70%;
margin: 0 auto;
}

#carousel-gallery .carousel-inner{
height: 600px;
}

#carousel-gallery .item.active img{
height: 600px;
margin: 0 auto;
}
*/


/* =============  #get-demo-block ===============*/
#get-app{
padding: 50px 0;
color: #fff;
}

#get-app .my-container{
margin-top: 50px;
margin-bottom: 50px;
}


#get-app .top .left {
width: 100%;
text-align: center;
}

#get-app .top h2{
margin: 0;
}

#get-app .top .right{
padding-top: 0;
width: 100%;
}

#get-app .top .right .get-app {
margin: auto;
}

#get-app .top .right a.get-app .apple-ic {
margin-bottom: 12px;
}

#get-app .top .right div{
margin: 0 auto;
max-width: 100%;
text-align: center;
}

#get-app .top .right .text-content{
font-size: 20px;
line-height: 28px;
margin-bottom: 25px;
}



#get-app .bottom img {
margin: auto 0;
}


#get-app .bottom .swiper-container-get-app .swiper-slide{
text-align: center;
}

#get-app .bottom .swiper-container-get-app img{
width: 250px;
}

#get-app .bottom .swiper-container-get-app .swiper-pagination{

position: relative;
margin-top: 35px;
left: auto;
top: auto;
}

#get-app .bottom .swiper-container-get-app .swiper-pagination-bullet{

background: #fff;
}
#get-app .bottom .swiper-container-get-app .swiper-pagination-bullet.swiper-pagination-bullet-active{
background: #603EF2;
}

/* =============  #get-demo-block ===============*/






/* =============  #get-demo-block ===============*/


section#get-demo-block{
padding-top: 30px;
position: relative;
min-height: 500px;
padding-bottom: 30px;
}

.request-form-success{
display: none;
padding: 100px 25px;
background-color: #20EBAF;
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
text-align: center;
}

section#get-demo-block h2{
text-align: center;
font-size: 55px;
font-weight: 500;
line-height: 66px;
padding-bottom: 40px;
text-transform: uppercase;
}


section#get-demo-block .content{
justify-content: space-between;
padding: 0 0 20px 0;
align-items: center;
}


section#get-demo-block .content .left{
width: 50%;
}



section#get-demo-block .content .left .get-demo-text{
font-size: 32px;
line-height: 50px;
letter-spacing: 0.416667px;
color: #FFFFFF;
width: 80%;
margin: 0;
}


section#get-demo-block .content .left .get-demo-text span{
font-weight: 800;
}


section#get-demo-block .content .right{
width: 50%;
justify-content: space-around;
}

section#get-demo-block .content .right .section-subtitle{
display: none;
}

section#get-demo-block .content .form-text{
font-size: 20px;
line-height: 27px;
text-transform: uppercase;
color: #FFFFFF;
}



section#get-demo-block #request-demo{
max-width: 800px;
width: 100%;
margin: 0px auto;
display: flex;
flex-wrap: wrap;
justify-content: space-between;
width: 100%;
}

section#get-demo-block #request-demo form {
display: flex;
flex-wrap: wrap;
justify-content: space-between;
width: 100%;
margin: 0px auto;
}

section#get-demo-block #request-demo .left,
section#get-demo-block #request-demo .right{
width: 47%;
display: flex;
flex-direction: column;
justify-content: flex-start;
}

section#get-demo-block #request-demo .btn-block{
width: 100%;
text-align: center;
margin-top: 0px;
}

section#get-demo-block #request-demo .form-group{
min-height: 55px;
position: relative;
margin-bottom: 25px;
}

section#get-demo-block #request-demo .form-label{
position: absolute;
top: 25px;
left: 25px;
color: #D3D3D3;
font-family: Arial;
font-size: 17px;
transform: translate(0px, -50%);
transition: 0.5s;
}

section#get-demo-block #request-demo .form-group.focused .form-label {
top: 0px;
transform: scale(0.7);
transform-origin: left;
}

.wpcf7 .wpcf7-form-control-wrap:has(input:focus) {

}
section#get-demo-block #request-demo input:focus + .form-label{
display: block;
}

section#get-demo-block #request-demo textarea,
section#get-demo-block #request-demo input{
border: none;
border-radius: 27.5px;
font-size: 18px;
color: #ffffff;
padding-left: 24px;
background-color: transparent;
margin-top: auto;
}

section#get-demo-block #request-demo .form-control:focus {
border-color: #603EF2;
}
section#get-demo-block #request-demo textarea:focus {
border-color: #603EF2;
}

section#get-demo-block #request-demo .form-control.nice-select {
padding: 0;
display: flex;
flex-direction: column;
justify-content: center;
padding-left: 25px;
background-color: transparent;
border: none;
color: white;
font-size: 16px;
height: auto;
}


section#get-demo-block #request-demo .form-control:not(select):focus{
box-shadow: none;
}


section#get-demo-block #request-demo textarea{
outline: none;
resize: none;
height: 210px;
padding-top: 20px;
}



section#get-demo-block #request-demo button{

border: none;

outline: none;

font-size: 16px;

font-weight: 500;

line-height: 19px;

background-color: #603ef2;

color: white;
transition: 0.5s;
}
section#get-demo-block #request-demo button:hover {
transform: scale(1.1);
}

section#get-demo-block #request-demo button span{

}



section#get-demo-block #request-demo input:focus::-webkit-input-placeholder{
color: transparent!important;
}

section#get-demo-block #request-demo input:focus::-moz-placeholder{
color: transparent!important;
}

section#get-demo-block #request-demo input:focus:-moz-placeholder{
color: transparent!important;
}

/* =============  #get-demo-block ===============*/




footer{
background: #000;
z-index: 999;
position: relative;
}


footer .content{
justify-content: space-between;
padding: 0 0;
align-items: center;
max-width: 1440px;
margin: auto;
}


footer .content .left{
width: 30%;
outline: none;
height: 230px;
}


footer .content .right{
width: 70%;
justify-content: space-around;
margin-top: 0;
margin-bottom: auto;
padding-top: 20px;
}

footer .content .right .block {
margin-top: 0;
}

footer .content .right .block.site-map {
display: none;
}

.footer-title {
opacity: 0.8;
color: #FFFFFF;
font-family: 'Ubuntu', sans-serif;
font-size: 18px;
line-height: 30px;
padding-bottom: 15px;
}


footer .content .right .title{
font-weight: 600;
font-size: 20px;
color: #fff;
}

footer .content .right .address{
/*margin: 25px 0;*/
}


footer .content .right .title{
font-size: 30px;
line-height: 40px;
margin-bottom: 25px;
font-weight: 400;
}

footer .content .right .text{
opacity: 0.8;
font-size: 18px;
line-height: 30px;
color: #fff;
}


footer .content .right .address .top{

font-size: 18px;
line-height: 24px;
color: #F2F2F2;
margin-bottom: 5px;

}

footer .content .right #footer-menu{
list-style: none;
}

footer .content .right #footer-menu li{
margin-bottom: 15px;
}

footer .content .right #footer-menu li a{
display: inline-block;
font-size: 18px;
line-height: 22px;
color: #fff;
text-decoration: underline;
}

footer .content .right .address .top span{
font-size: 18px;
line-height: 24px;
color: #F2F2F2;
}


footer .content .right .address .bottom{

color: #9899A1;
}


footer .content .right .contacts {

font-size: 18px;
color: #F2F2F2;

}

footer .content .right .contacts .item:first-child{

margin-bottom: 7px;

}

footer .content .right .contacts .item a {
color: white;
}





footer .content-bottom{
background: #101010;
padding: 15px 25px;
}


footer .content-bottom .copywrite{
justify-content: space-between;
font-size: 14px;
line-height: 18px;
color: #B5B5B5;
}
footer .content-bottom .copywrite a {

color: #B5B5B5;
}

footer .content-bottom .copywrite img{
height: 15px;
}


footer  #address-map-footer{
width: 100%;
height: 100%;
}


@media (max-width: 1025px) {

header .bottom{
display: none;
}
}


@media screen and (min-width: 992px)  and (max-width: 1200px) {

section{
background: #000000;
margin-top: 30px;
}


h2{
font-style: normal;
font-weight: bold;
font-size: 60px;
line-height: 70px;
text-transform: uppercase;
color: #FFFFFF;

}




.section-subtitle{
font-size: 20px;
line-height: 27px;
text-transform: uppercase;
}



.section-text-big{
font-size: 18px;
line-height: 28px;
letter-spacing: 0.2px;
color: #CCCCCC;
}


.section-item-title{

font-style: normal;
font-weight: bold;
font-size: 24px;
line-height: 30px;
color: #FFFFFF;

}


.section-text-gray{
font-style: normal;
font-weight: normal;
font-size: 18px;
line-height: 27px;
color: #CCCCCC;
}

.section-text-white{
font-style: normal;
font-weight: normal;
font-size: 16px;
line-height: 27px;
color: #FFFFFF;
}

.btn-text{
font-size: 16px;
line-height: 21px;
text-align: center;
color: #FFFFFF;
display: block;
text-transform: uppercase;
}

.btn-blue{
width: 103px;
height: 84px;
background: #3134FD;
text-align: center;
align-items: center;
cursor: pointer;
}

#our-features h2{
margin-top: 0;
}

#carousel .item img {
width: 550px;
}

#carousel-tour-360 .item-wrap{
height: 600px;
}


section#tour-360{
height: 600px;
}


#carousel .item {
height: 500px;
}

#about-us .content .right .numbers {
width: 100%;
}
#about-us .content .right .number {
text-align: center;
font-weight: bold;
font-size: 60px;
line-height: 58px;
}

#about-us .content .right .numbers .title {
font-size: 18px;
}

section#testimonials {
padding: 50px 0 75px 0;
}

}



#mobile{
display: none;
width: 100%;
height: 100vh;
}

/*
#carousel-indicators-tour-360{
    padding: 25px 25px 3px 25px;
}

#carousel-indicators-tour-360 li {

    font-size: 14px;
    padding: 0 0 7px 0!important;
}*/

.swiper-button-prev {

left: -145px;
}

.swiper-button-next {
right: -145px;
}

.swiper-btn {
width: 67px;
height: 67px;
border-radius: 100%;
color: white;
border: 2px solid white;
outline: none;
}

.swiper-btn:after {
font-size: 20px;
}
.form-group .nice-select {
width: 100%;
padding: 0;
}
.first-block {
position: relative;
width: 100%;
padding-top: 60px;
margin-top: 0;
display: flex;
font-size: 0;
cursor: pointer;
height: calc(100vh);
padding-top: 60px;
}

.first-block .center {position: absolute;top: 50%;left: 50%;transform: translate(-50%,-50%) scale(0);user-select: none;transition: 0.5s;}

.first-block:hover .center {
transform: translate(-50%,-50%) scale(1);
}

.first-block .center img {
filter: drop-shadow(0px 0px 2px black);
cursor: pointer;
}

.first-block .center.play img.play {
display: block;
animation-name: video_play;
animation-duration: 1s;
animation-iteration-count: 1;
opacity: 0;
}

.first-block .center.pause img.play {
display: none;
}

.first-block .center.pause img.pause {
display: block;
animation-name: video_play;
animation-duration: 1s;
animation-iteration-count: 1;
opacity: 0;
}

.first-block .center img.pause {
display: none;
}
.google-map {
positioN: relative;
}

.google-map .map-parent .filter .filters-list-wrap {
height: calc(100vh - 60px);
}

.google-map .map-parent.fullscreen .filter .filters-list-wrap {
height: 100vh;
}

.google-map  .map-parent {height: calc(100vh - 60px);}
.map-filter {

position: absolute;

bottom: 0;

left: 0;

color: white;

padding-bottom: 30px;

padding-left: 64px;
}

.filter-btn {
color: #FFFFFF;
font-size: 25px;
line-height: 28px;
display: flex;
transition: 0.5s;
cursor: pointer;
margin-top: 20px;
}
.filter-btn:hover,
.filter-btn.active {
color: #603ef2;
}

.filter-btn .marker-ic {
width: 22px;
height: 22px;
background-repeat: no-repeat;
background-size: contain;
background-position: center;
margin-right: 20px;
margin-top: auto;
margin-bottom: auto;
}
.google-map h2 {
text-align: center;
padding-top: 30px;
padding-bottom: 30px;
display: none;
}
.popup-overlay {
background-color: rgba(0, 0, 0, 0.5);
position: fixed;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
z-index: 9999;
display: none;
}
.default-popup {
position: absolute;
width: 1px;
height: 1px;
background-color: white;
z-index: 9999;
opacity: 1;
border-radius: 100%;
display: none;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
border-radius: 8px;
display: flex;
display: none;
}
.open .popup-close-btn{
display: block;
top: 0px;
right: -40px;
background-image: url(./img/close-ic.svg);
background-size: 25px;
position: absolute;
}

.popup-close-btn {

position: absolute;

top: 0;

right: -40px;

width: 32px;

height: 32px;

background-image: url(./img/close-ic.svg);

background-position: center;

background-repeat: no-repeat;

background-size: contain;

cursor: pointer;

display: none;
}
.default-popup .popup-content {
background-color: white;
border-radius: 8px;
position: relative;
overflow: hidden;
}
.default-popup.open {
transform: scale(1);
opacity: 1;
border-radius: 8px !important;
display: flex !important;
}

.popup-content{
width: 100%;
height: 100%;
display: none;
}

.open .popup-content {
display: block;
}

.popup-content iframe {
width: 100%;
height: 100%;
border: none;
border-radius: 8px;
}
.default-popup .qr-code {
height: 300px;
width: 300px;
margin: auto;
margin-bottom: 0;
margin-top: 0;
}
.default-popup .qr-code img {
object-fit: contain;
width: 100%;
height: 100%;
}
.get-up-popup .logo {
filter: invert(1);
margin: auto;
display: block;
margin-bottom: 40px;
margin-top: 20px;
display: none;
}

.open.get-up-popup {
padding: 30px;


}

.open.get-up-popup .popup-close-btn {
top: 15px;
right: -49px;
}
.get-up-popup.open .popup-content {
display: flex;
}
.get-up-popup .popup-content {
display: none;
flex-direction: column;
}
.get-up-popup h2 {
color: #000000;
font-size: 50px;
font-weight: 500;
line-height: 61px;
text-align: center;
margin-top: 0px;
margin-bottom: 15px;
}
.get-up-popup .subtitle, .get-up-popup h3 {
width: 100%;
height: 30px;
color: #000000;
font-size: 20px;
line-height: 30px;
text-align: center;
}

.get-up-popup h3 {
line-height: 1;
margin-top: 10px;
margin-bottom: 0;
}
.get-up-popup .qr-code {
width: 212px;
height: 212px;
margin: 20px auto;
margin-bottom: 34px;
}
.get-up-popup .app-links {
width: 100%;
margin-top: 20px;
display: flex;
justify-content: center;
}
.get-up-popup .app-links .app-link {
margin: 0 10px;
}
.get-up-popup .copy-link-box {
font-size: 20px;
padding-top: 37px;
}

.get-up-popup .copy-link-box .text {
text-align: center;
display: flex;
justify-content: center;
}

.get-up-popup .copy-link-box .text a {
color: #603ef2;
text-decoration: dashed;
}

.get-up-popup .copy-link-box .text a:hover {
/* text-decoration: dashed; */
}
.get-up-popup .copy-link-box .text a {
margin-left: 10px;
}
.clipboard-btn {
width: 16px;
height: 16px;
background-image: url(./img/ic_copy.svg);
background-position: center;
background-repeat: no-repeat;
background-size: contain;
margin: auto 0;
margin-left: 10px;
position: relative;
cursor: pointer;
}
.clipboard-btn .tooltip {
transition: 0.5s;
left: calc(100% + 10px);
width: 100px;
text-align: center;
background-color: #603ef2;
border-radius: 3px;
color: white;
padding: 5px;
top: 50%;
transform: translateY(-50%) scale(0);
}
.clipboard-btn.active .tooltip {
opacity: 1;
transform: translateY(-50%) scale(1);
}
.get-up-popup .form-box {

margin: 0 auto;
}

.get-up-popup .form-box .form-line {display: flex;position: relative;margin-top: 18px;justify-content: center;width: 350px;margin: auto;margin-top: 17px;}

.get-up-popup .form-box .form-line .phone {
border: none;
margin-right: auto;
margin-top: auto;
height: auto;
}

.get-up-popup .form-box .form-line .phone input {
border-radius: 25px;
border-width: 1px;
border-style: solid;
border-color: #CECFD0;
outline: none;
height: 46px;
width: 290px;
color: black;
padding: 10px 20px;
background-color: #FAFAFA;
}

.get-up-popup .form-box .form-line .phone input:focus {
border-color: #603ef2;
}

.get-up-popup .form-box .wpcf7-submit {
font-size: 0;
width: 46px;
height: 46px;
margin: auto 0;
border-radius: 100%;
border: none;
background-color: #603ef2;
outline: none;
background-image: url(./img/submit-btn-arow.svg);
background-position: center;
background-repeat: no-repeat;
background-size: 21px;
}

.resize-window-message {
position: fixed;
z-index: 9999999;
background-color: black;
height: 100vh;
width: 100vw;
top: 0;
left: 0;
display: flex;
flex-direction: column;
justify-content: center;
padding: 50px;
display: none;
}
.resize-window-message h2 {

font-size: 50px;

text-align: center;

line-height: 1.5;
}


.folder-practice {
width: 100%;
height: 100vh;
}


.folder-box {
position: relative;
width: 261px;
height: 194px;
background-color: green;
}
.folder-box .border-top-left {

height: 39px;

width: 62px;

position: absolute;

bottom: calc(100% - 39px);

left: 0;

border-width: 1px 0 0px 1px;

border-style: solid;

border-color: white;

border-top-left-radius: 16px;

background-color: rgba(0, 0, 0, 0.3);
}
.folder-box .bottom-right {
margin-top: auto;
width: 100%;
height: calc(100% - 39px);
border-width: 0px 1px 1px 1px;
border-style: solid;
border-color: white;
position: absolute;
bottom: 0;
left: 0;
border-bottom-right-radius: 16px;
border-bottom-left-radius: 16px;
background-color: rgba(0, 0, 0, 0.3);
}
.folder-box .border-top-right {
height: 12px;
width: calc(100% - 96px);
position: absolute;
bottom: calc(100% - 39px);
right: 0;
border-width: 1px 1px 0px 0px;
border-style: solid;
border-color: white;
border-top-right-radius: 16px;
background-color: rgba(0, 0, 0, 0.3);
}

.folder-box .border-top-center {
width: 34px;
height: 39px;
position: absolute;
left: 62px;
border-width: 1px;
border-color: white;
overflow: hidden;
top: 0;
}
.folder-box > * {
position: relative;
z-index: 1;
}
.folder-box .border-top-center:after {content: '';width: 79px;height: 50px;border: 1px solid white;position: absolute;transform: rotate(39deg);top: 18px;left: -25px;background-color: rgba(0, 0, 0, 0.3);}


#wpadminbar {
z-index: 9999999;
}
.scrollmagic-pin-spacer {
position: relative;
z-index: 9999;
}

input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus {
/*    border: 0px solid black;
        -webkit-text-fill-color: white;
        -webkit-box-shadow: 0 0 0 0px black, 0 0 0 30px black inset !important ;
        border-radius: 0px;*/
}


.custom-progress-bar {
width: 364px;
z-index: 2;
margin-top: 70px;
}

.mobile .custom-progress-bar {
display: none;
}

.custom-progress-bar .bottom-text {
text-align: center;
color: white;
font-size: 25px;
padding-top: 2px;
text-shadow: 2px 2px black;
}

.custom-progress-bar .progress-line {
width: 100%;
height: 4px;
background-color: rgba(255, 255, 255, 0.4);
border-radius: 3px;
}

.custom-progress-bar .progress-line-active {
width: 0%;
height: 100%;
background-color: #603ef2;
border-radius: 3px;
position: relative;
}

.custom-progress-bar .progress-line-active .custom-tooltip {
position: absolute;
font-size: 20px;
bottom: 13px;
right: 0%;
width: 50px;
transform: translateX(50%);
display: flex;
justify-content: center;
text-align: center;
}

.custom-progress-bar .progress-line-active .custom-tooltip .corner {
width: 10px;
height: 10px;
background-color: #603ef2;
position: absolute;
bottom: -4px;
left: calc(50% + -4px);
transform: rotate(45deg);
}

.custom-progress-bar .progress-line-active .custom-tooltip .text {
width: 100%;
height: 26px;
line-height: 26px;
color: white;
background-color: #603ef2;
padding: 0 5px;
border-radius: 3px;
font-size: 18px;
position: relative;
z-index: 2;
}

.custom-progress-bar .progress-line-active .custom-tooltip .text span {
font-size: 14px;
padding-left: 2px;
}

.custom-progress-bar .progress-line-active .custom-tooltip .text .change {
font-size: 20px;
}
.si-float-wrapper {
position: absolute;
width: 100%; }
.si-float-wrapper,
.si-float-wrapper * {
box-sizing: border-box; }

[class*='si-wrapper'] {
display: -webkit-box;
display: -ms-flexbox;
display: flex;
position: absolute;
-webkit-box-align: center;
-ms-flex-align: center;
align-items: center;
font-size: 1.4rem;
cursor: default; }

.si-wrapper-top {
-webkit-box-orient: vertical;
-webkit-box-direction: normal;
-ms-flex-direction: column;
flex-direction: column;
margin-top: -40px;
margin-left: 0px;
-webkit-transform: translate(-50%, -100%);
transform: translate(-50%, -100%); }

.si-wrapper-bottom {
-webkit-box-orient: vertical;
-webkit-box-direction: reverse;
-ms-flex-direction: column-reverse;
flex-direction: column-reverse;
margin-top: 0px;
margin-left: 0px;
-webkit-transform: translate(-50%, 0);
transform: translate(-50%, 0); }

.si-wrapper-left {
margin-top: -20px;
margin-left: -11px;
-webkit-transform: translate(-100%, -50%);
transform: translate(-100%, -50%); }

.si-wrapper-right {
-webkit-box-orient: horizontal;
-webkit-box-direction: reverse;
-ms-flex-direction: row-reverse;
flex-direction: row-reverse;
margin-top: -20px;
margin-left: 11px;
-webkit-transform: translate(0, -50%);
transform: translate(0, -50%); }

[class*='si-shadow-wrapper'] {
display: -webkit-box;
display: -ms-flexbox;
display: flex;
position: absolute;
top: 0;
right: 0;
bottom: 0;
left: 0;
opacity: 0.4;
z-index: 1; }

.si-shadow-wrapper-top,
.si-shadow-wrapper-bottom {
-webkit-box-orient: vertical;
-webkit-box-direction: normal;
-ms-flex-direction: column;
flex-direction: column; }

.si-shadow-pointer-bottom,
.si-shadow-pointer-right {
-webkit-box-ordinal-group: 0;
-ms-flex-order: -1;
order: -1; }

.si-shadow-frame {
box-shadow: 0 4px 6px 0 #000; }

[class*='si-shadow-pointer'] {
position: relative;
width: 15px;
height: 15px;
margin: auto; }

[class*='si-shadow-inner-pointer'] {
position: absolute;
width: 141%;
height: 141%;
box-shadow: -2.82843px 2.82843px 6px 0 #000; }

.si-shadow-inner-pointer-top {
left: 50%;
-webkit-transform: translate(-50%, -50%) rotate(-45deg);
transform: translate(-50%, -50%) rotate(-45deg); }

.si-shadow-inner-pointer-bottom {
bottom: 0;
left: 50%;
-webkit-transform: translate(-50%, 50%) rotate(-45deg);
transform: translate(-50%, 50%) rotate(-45deg); }

.si-shadow-inner-pointer-left {
top: 50%;
-webkit-transform: translate(-50%, -50%) rotate(-45deg);
transform: translate(-50%, -50%) rotate(-45deg); }

.si-shadow-inner-pointer-right {
top: 50%;
right: 0;
-webkit-transform: translate(50%, -50%) rotate(-45deg);
transform: translate(50%, -50%) rotate(-45deg); }

.si-frame {
position: relative;
-webkit-box-flex: 1;
-ms-flex: 1 1 auto;
flex: 1 1 auto;
border-radius: 0;
overflow: hidden;
z-index: 2; }

.si-content-wrapper {
width: 100%;
max-width: 100%;
max-height: 100%;
padding: 0;
background-color: #eee; }
.si-has-border .si-content-wrapper {
border: 1px solid #bbb; }

.si-content {
overflow: auto; }

.si-close-button {
position: absolute;
top: 0;
right: 0;
border: 0;
outline: none;
background-color: transparent;
color: inherit;
font-family: Arial, Baskerville, monospace;
font-size: 24px;
cursor: pointer;
opacity: 0.5;
-webkit-appearance: none;
-moz-appearance: none;
appearance: none; }
.si-close-button:hover, .si-close-button:focus {
opacity: 0.7; }

[class*='si-pointer-border'] {
position: absolute;
border: 15px solid transparent;
z-index: 3; }

[class*='si-pointer-bg'] {
position: relative;
border: 15px solid transparent;
z-index: 4;
}
.si-has-border [class*='si-pointer-bg'] {
border-width: 15px; }

.si-pointer-border-top,
.si-pointer-border-bottom {
left: 50%;
-webkit-transform: translate(-50%, 0);
transform: translate(-50%, 0); }

.si-pointer-border-left,
.si-pointer-border-right {
top: 50%;
-webkit-transform: translate(0, -50%);
transform: translate(0, -50%); }

.si-pointer-top {
border-bottom: 0; }

.si-pointer-border-top {
bottom: 0;
border-top-color: #bbb; }

.si-pointer-bg-top {
border-top-color: #eee; }

.min .si-pointer-bg-top {border-top-color: #603ef2;display: none;}
.si-has-border .si-pointer-bg-top {
top: -1px;
margin-bottom: 0px; }

.si-pointer-bottom {
border-top: 0; }

.si-pointer-border-bottom {
top: 0;
border-bottom-color: #bbb; }

.si-pointer-bg-bottom {
border-bottom-color: #eee; }
.si-has-border .si-pointer-bg-bottom {
bottom: -1px;
margin-top: 0px; }

.si-pointer-left {
border-right: 0; }

.si-pointer-border-left {
right: 0;
border-left-color: #bbb; }

.si-pointer-bg-left {
border-left-color: #eee; }
.si-has-border .si-pointer-bg-left {
left: -1px;
margin-right: 0px; }

.si-pointer-right {
border-left: 0; }

.si-pointer-border-right {
left: 0;
border-right-color: #bbb; }

.si-pointer-bg-right {
border-right-color: #eee; }
.si-has-border .si-pointer-bg-right {
right: -1px;
margin-left: 0px; }



.map-canvas {
width: 100%;
height: 100%; }

.custom-window {
top: 30px;
max-width: 400px;
-webkit-transition: top 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.3s cubic-bezier(0.4, 0, 0.2, 1);
transition: top 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.3s cubic-bezier(0.4, 0, 0.2, 1);
opacity: 0;
visibility: hidden; }
.custom-window.open .si-frame {
overflow: visible; }
.custom-window.active {
top: 0;
opacity: 1;
visibility: visible;
width: 300px;
max-width: 90vw;
}
.custom-window .si-content-wrapper {
padding-bottom: 0;
}
.custom-window .si-content {
overflow: visible;
width: 100%;
max-width: 100%!important;
overflow: hidden;
position: relative;
// directioN: rtl;
}

.custom-content {
position: relative;
max-height: inherit;
padding-top: 120px;
overflow: auto;
z-index: 2;
background-color: #eeeeee;
margin-top: 0;
}

.custom-img {
position: absolute;
top: 0;
right: 0;
left: 0;
height: 120px;
background-repeat: no-repeat;
background-position: center;
background-size: cover;
z-index: 1;
display: none;
}

.custom-header {
position: relative;
margin: 0;
background-color: #603ef2;
color: #fff;
font-size: 20px;
box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
width: 100%;
}
.custom-header small {
display: block;
font-size: 0.55em;
font-weight: 400;
opacity: 0.75; }

.custom-body {
padding: 0;
background-color: #eee;
display: flex;
flex-direction: column;
}

.custom-header, .custom-body .text {
}

.custom-body .text {
padding: 10px 20px;
line-height: 1.5;
max-height: 130px;
overflow-y: auto;
font-size: 14px;
text-align: justify;
}

.custom-header, .custom-body a {}
.custom-body p {
margin: 0; }
.custom-body * + p {
margin-top: 1em; }
.custom-body a.go-to-website {
color: white;
display: block;
width: 130px;
background-color: #603ef2;
padding: 5px 20px;
border-radius: 25px;
text-decoration: none;
margin-left: 18px;
margin-right: auto;
margin-top: 10px;
margin-bottom: 10px;
border: 2px solid #603ef2;
font-weight: 700;
transition: 0.5s;
font-size: 14px;
margin-right: auto;
width: auto;
}

.custom-body a {
font-size: 14px;
}
.custom-body a:hover, .custom-body a:focus, .custom-body a:active {
color: #603ef2;
background-color: white;
}

.custom-close {
position: absolute;
top: 0;
right: 0;
width: 50px;
height: 50px;
-webkit-transition: background-color 0.15s cubic-bezier(0.4, 0, 0.2, 1);
transition: background-color 0.15s cubic-bezier(0.4, 0, 0.2, 1);
border: 0;
background-color: rgba(0, 0, 0, 0.5);
color: #fff;
font-size: 1.5em;
box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
cursor: pointer;
z-index: 3;
box-shadow: none;
}
.custom-close:hover, .custom-close:focus, .custom-close:active {
background-color: rgba(28, 28, 26, 0.8); }

.custom-window {
max-width: 300px;
}
.custom-content {
padding-top: 0;
}
.custom-img {
height: 160px; }
.custom-header {
line-height: 1.5;
}

::-webkit-scrollbar:horizontal,
::-webkit-scrollbar {
width: 5px;
height: 5px;
// background-color: rgba(175, 176, 178, 0.26);
}
::-webkit-scrollbar-track:horizontal,
::-webkit-scrollbar-track {
// box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
}

::-webkit-scrollbar-thumb:horizontal,
::-webkit-scrollbar-thumb {
// background-color: #603ef2;
// outline: 1px solid slategrey;
}


.map-n-filter-container .zoom-control {
width: 44px;
height: 89px;
background-color: #603ef2;
position: absolute;
bottom: 30px;
right: 44px;
border-radius: 25px;
font-size: 0;
}

.map-n-filter-container .zoom-control .sep {width: 70%;margin-left: auto;margin-right: auto;height: 1px;background-color: #e6e6e6;opacity: 0.07;}

.map-n-filter-container .zoom-control-btn {
color: white;
font-size: 20px;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
height: 44px;
width: 44px;
cursor: pointer;
font-size: 0;
transition: 0.5s;
}

.map-n-filter-container .zoom-control-btn:hover {
background-color: hsl(222, 15%, 23%);
}

.map-n-filter-container .zoom-control-btn.plus {
background-image: url(./img/map-ic-plus.svg);
background-position: center;
border-top-left-radius: 25px;
border-top-right-radius: 25px;
}

.map-n-filter-container .zoom-control-btn.minus {
background-image: url(./img/map-ic-minus.svg);
background-position: center;
border-bottom-left-radius: 25px;
border-bottom-right-radius: 25px;
}


.map-n-filter-container .fullscreen-control {
width: 44px;
height: 44px;
background-color: #323743;
position: absolute;
top: 44px;
right: 44px;
background-image: url(./img/map-fullscreen-ic.svg);
background-position: center;
background-repeat: no-repeat;
border-radius: 100%;
cursor: pointer;
background-size: 20px;
transition: 0.5s;
}

.map-n-filter-container .fullscreen-control:hover {
background-color: #603ef2;
}
#bitnami-banner {
display: none!important;
}

#header-logo {
padding-top: 5px;
padding-bottom: 5px;
height: 50px;
}

#header-logo a {
display: block;
height: 100%;
}

#header-logo a img {
width: 100%;
height: 100%;
object-fit: contain;
display: block;
}




@media screen and (max-width: 768px) {
.custom-window,
.custom-window.active {
max-width: 90%;
width: 90%;
}
.custom-window .custom-close {
right: 0;
z-index: 3;
height: 50px;
top: 0;
box-shadow: none;
width: 50px;
background-color: black;
}
.map-n-filter-container .fullscreen-control {
top: 10px;
right: 10px;
}

body .map-parent .map-type {
top: 15px;
right: 70px;
}

.map-n-filter-container .zoom-control {
right: 10px;
bottom: 10px;
}
}

.page-template-gallery-full {

}
.separate-page header,
.separate-page footer {
display: none;
}
.separate-page section#about-us {
min-height: 100vh;
}
.separate-page section {
margin-top: 0;
}

.separate-page .first-block {
padding-top: 0;
}

.separate-page section#get-demo-block {
min-height: 100vh;
padding: 0;
}

.separate-page section#get-demo-block .my-container {
display: flex;
flex-direction: column;
justify-content: center;
min-height: 100vh;
}
.safari-run .three_js .search-filter .search-filter-btn {
transition: none;
animation: none!important;
}
.safari-run .about-us-slider .about-us-slider-track .big-title {
transition: none;
}
.safari-run .map-n-filter-container .fullscreen-control {
display: none;
}
.safari-run .three_js .floors-selector-n-back {
transition: none;
}

.safari-run .three_js .bomb-btn {
transition: none;
}

.safari-run .three_js .left-corner-block {
transition: none;
}

.page-template-contacts-page.separate-page footer {
height: 100vh;
display: flex;
}
.page-template-contacts-page.separate-page footer .content-bottom {
display: none;
}
.page-template-get-app-page .get-up-popup {
left: 50%;
top: 50%;
display: flex;
width: 501px;
height: auto;
transform: translate(-50%,-50%);
border-radius: 8px;
}

.page-template-get-app-page .get-up-popup  .popup-content {
display: flex;
padding: 30px;
}


.page-template-get-app-page .popup-close-btn {
display: block;
top: 0px;
right: -40px;
background-image: url(./img/close-ic.svg);
background-size: 25px;
position: absolute;
}

.page-template-get-app-page {
height: 100vh;
}

body {
font-size: 14px;
line-height: 1.42857143;
color: #333;
}
.simple-marker-content {
text-align: right;
padding-left: 15px;
padding-right: 15px;
}
`;


const expMapStyle =`
.map-parent {
  width: 100vw;
  height: 100vh;
  position: relative;
  overflow: hidden; }
  .map-parent .green-line {
    color: #00a04a;
    font-size: 16px;
    font-weight: 700;
    width: 100%;
    text-align: center;
    padding-left: 30px; }
  .map-parent .red-line {
    color: #ef1c23;
    font-size: 16px;
    font-weight: 700;
    width: 100%;
    text-align: center;
    padding-left: 30px; }
  .map-parent .line-title {
    font-size: 16px;
    font-weight: 700;
    width: 100%;
    text-align: center;
    padding-left: 30px; }
  .map-parent .filter {
    position: absolute;
    bottom: 0;
    right: 0;
    direction: rtl;
    width: 100%; }
    .map-parent .filter .filters-list-wrap {
      position: absolute;
      width: 100vw;
      height: 100vh;
      top: 0;
      background-color: rgba(40, 49, 75, 0.4);
      padding-bottom: 80px;
      padding-top: 0px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-end; }
    .map-parent .filter .filters-list {
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-right: 22px;
      height: auto;
      overflow: auto; }
      .map-parent .filter .filters-list .filter-list-btn {
        color: white;
        display: flex;
        font-size: 20px;
        line-height: 2; }
        .map-parent .filter .filters-list .filter-list-btn.active .move-part .text {
          text-shadow: -2px 2px 2px black; }
        .map-parent .filter .filters-list .filter-list-btn.active .move-part:after {
          content: '';
          position: absolute;
          bottom: 8px;
          left: 5px;
          width: 100%;
          height: 10px;
          background-color: #603ef2;
          z-index: 0; }
        .map-parent .filter .filters-list .filter-list-btn .marker-ic {
          width: 30px;
          height: 30px;
          display: block;
          margin: auto 0;
          background-position: center;
          background-repeat: no-repeat; }
        .map-parent .filter .filters-list .filter-list-btn .move-part {
          margin: auto 0;
          margin-left: 10px;
          position: relative;
          z-index: 2; }
          .map-parent .filter .filters-list .filter-list-btn .move-part .text {
            position: relative;
            z-index: 1; }
    .map-parent .filter .filter-btn {
      position: absolute;
      bottom: 10px;
      right: 10px;
      width: 55px;
      height: 55px;
      background-color: #603ef2;
      border-radius: 100%;
      background-image: url(./img/filter.svg);
      background-position: center;
      background-repeat: no-repeat;
      background-size: 20px;
      transition: none;
      z-index: 2;
      box-shadow: 1px 1px 10px rgba(46, 13, 191, 0.5); }
      .map-parent .filter .filter-btn.open {
        background-size: 18px;
        background-color: #603ef2;
        background-image: url(./img/close-ic.svg);
        box-shadow: 0px 0px 0px #2e0dbf; }
  .map-parent.for-app .fullscreen-control {
    display: none; }
  .map-parent.for-app .zoom-control {
    display: none; }
  .map-parent.for-app .map-type {
    left: 10px;
    right: initial;
    top: initial;
    bottom: 10px; }
  .map-parent.for-app .custom-window .si-content-wrapper {
    border-radius: 10px;
    background-color: white; }
  .map-parent .custom-header {
    background-color: white;
    box-shadow: none;
    font-size: 30px;
    font-stretch: normal;
    font-style: normal;
    line-height: normal;
    letter-spacing: normal;
    color: #000000;
     }
  .map-parent .custom-body {
    background-color: white;
    padding-bottom: 20px; }
    .map-parent .custom-body.with-img .text {
      margin-top: 20px; }
    .map-parent .custom-body .links-btns-wrap .circle-btn {
      position: relative;
      margin-left: 10px;
      margin-top: 13px;
      margin-bottom: auto;
      display: block;
      width: 44px;
      border-radius: 100%;
      background-color: white;
      border: 1px solid #603ef2; }
      .map-parent .custom-body .links-btns-wrap .circle-btn.phone-btn {
        border: none;
        width: auto;
        padding-right: 42px;
        margin-right: 13px;
        color: black;
        font-size: 14px; }
        .map-parent .custom-body .links-btns-wrap .circle-btn.phone-btn:after {
          background-image: url(./img/new_map_ic_call.svg);
          background-size: 18px;
          background-position: right 8px center; }
      .map-parent .custom-body .links-btns-wrap .circle-btn.map-place {
        width: auto;
        border: none;
        width: auto;
        padding-right: 42px;
        margin-right: 13px;
        color: black;
        margin-top: 12px; }
        .map-parent .custom-body .links-btns-wrap .circle-btn.map-place:after {
          background-image: url(./img/new_map_ic_compass.svg);
          background-size: 18px;
          background-position: right 8px center; }
      .map-parent .custom-body .links-btns-wrap .circle-btn:after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-repeat: no-repeat;
        background-position: center;
        background-size: 20px;
        transition: 0.5s; }
    .map-parent .custom-body .route-wrap {
      display: flex;
      border-bottom: 1px solid rgba(151, 151, 151, 0.35);
      border-top: 1px solid rgba(151, 151, 151, 0.35);
      justify-content: space-between;
      padding-left: 10px; }
    .map-parent .custom-body .text {
      width: calc(100% - 40px);
      padding: 0;
      padding-right: 10px;
      margin: auto;
      margin-bottom: 20px; }
    .map-parent .custom-body .get-route-title {
      margin-top: auto;
      margin-bottom: auto;
      padding-right: 19px;
      letter-spacing: 0.4px;
      padding-top: 10px;
      padding-bottom: 10px; }
      .map-parent .custom-body .get-route-title .top-text {
        display: block;
        font-size: 16px;
        margin-bottom: 5px; }
      .map-parent .custom-body .get-route-title .bottom-text {
        display: block;
        font-size: 14px;
        font-weight: 400;
        display: flex; }
        .map-parent .custom-body .get-route-title .bottom-text .middle {
          margin: 0 5px; }
        .map-parent .custom-body .get-route-title .bottom-text .row {
          display: flex; }
          .map-parent .custom-body .get-route-title .bottom-text .row span {
            margin: 0 2px; }
    .map-parent .custom-body .route-type-btns {
      padding: 0;
      padding-right: 10px; }
      .map-parent .custom-body .route-type-btns .route-type-btn {
        height: 34px;
        width: 34px;
        margin-top: auto;
        margin-bottom: auto;
        margin-left: 4px;
        margin-right: 4px; }
        .map-parent .custom-body .route-type-btns .route-type-btn:after {
          background-size: 20px; }
    .map-parent .custom-body .go-to-website {
      padding: 0;
      margin-bottom: -3px;
      height: 42px;
      margin-left: 2px;
      display: flex;
      line-height: 44px;
      margin-right: 6px;
      background-color: white;
      color: #272727;
      font-weight: 400;
      margin-top: 13px;
      margin-left: initial;
      padding-right: 14px;
      border: none; }
      .map-parent .custom-body .go-to-website:before {
        content: '';
        width: 20px;
        height: 20px;
        background-image: url(./img/new_map_ic_globe.svg);
        background-repeat: no-repeat;
        background-position: left 0px center;
        margin: auto 0;
        margin-left: 14px;
        background-size: 20px; }
  .map-parent .map-container {
    width: 100%;
    height: calc(100vh + 25px);
    transition: 0.5s; }
    .map-parent .map-container.open {
      filter: blur(4px) grayscale(1) brightness(0.4); }
  .map-parent .custom-window {
    width: 409px; }
    .map-parent .custom-window .si-shadow-frame {
      box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.4);
      border-radius: 10px;
      overflow: hidden; }
    .map-parent .custom-window .si-shadow-inner-pointer-top {
      box-shadow: 0px 10px 7px rgba(0, 0, 0, 0.4); }
    .map-parent .custom-window .si-content-wrapper {
      border-radius: 10px;
      overflow: hidden;
      position: relative; }
    .map-parent .custom-window .custom-content {
      background-color: white; }
      .map-parent .custom-window .custom-content .custom-header-wrap.with-img {
        position: relative;
        display: flex;
        height: 160px; }
        .map-parent .custom-window .custom-content .custom-header-wrap.with-img .custom-header {
          display: flex;
          flex-direction: column;
          justify-content: flex-end;
          margin-top: auto;
          margin-bottom: auto;
          position: relative;
          z-index: 2;
          height: auto;
          top: 0;
          left: 0;
          background-color: transparent;
          background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.4) 40%, transparent);
          color: white;
          text-shadow: 1px 1px 2px black; }
        .map-parent .custom-window .custom-content .custom-header-wrap.with-img .custom-header-img {
          height: auto;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: 1; }
          .map-parent .custom-window .custom-content .custom-header-wrap.with-img .custom-header-img img {
            width: 100%;
            height: 100%;
            object-fit: cover; }
    .map-parent .custom-window .si-pointer-bg-top {
      border-top-color: white;
      display: block;
      box-shadow: none; }
    .map-parent .custom-window .custom-close {
      color: black;
      background-image: url(./img/snazzy-map-ic-close.svg);
      font-size: 0;
      background-position: center;
      background-repeat: no-repeat;
      width: 38px;
      height: 38px;
      border-radius: 100%;
      background-color: transparent;
      top: 10px;
      right: 10px;
      // box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3); 
      }
    @media (orientation: landscape) {
      .map-parent .custom-window .custom-close {
        top: 19px; } }
  .map-parent .zoom-control {
    width: 44px;
    height: 89px;
    background-color: #603ef2;
    position: absolute;
    bottom: 10px;
    right: initial;
    left: 10px;
    border-radius: 25px;
    font-size: 0;
    box-shadow: 1px 1px 10px rgba(46, 13, 191, 0.5); }
  .map-parent .zoom-control .sep {
    width: 70%;
    margin-left: auto;
    margin-right: auto;
    height: 1px;
    background-color: #e6e6e6;
    opacity: 0.07; }
  .map-parent .zoom-control-btn {
    color: white;
    font-size: 20px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 44px;
    width: 44px;
    cursor: pointer;
    font-size: 0;
    transition: 0.5s;
    background-position: 2px center; }
  .map-parent .zoom-control-btn:hover {
    background-color: #323743; }
  .map-parent .zoom-control-btn.plus {
    background-image: url(./img/Controls_ic_plus.svg);
    border-top-left-radius: 25px;
    border-top-right-radius: 25px; }
  .map-parent .zoom-control-btn.minus {
    background-image: url(./img/Controls_ic_minus.svg);
    border-bottom-left-radius: 25px;
    border-bottom-right-radius: 25px; }
  .map-parent .fullscreen-control {
    width: 44px;
    height: 44px;
    background-color: #323743;
    position: absolute;
    top: 44px;
    right: 44px;
    background-image: url(./img/map-fullscreen-ic.svg);
    background-position: center;
    background-repeat: no-repeat;
    border-radius: 100%;
    cursor: pointer;
    background-size: 20px;
    transition: 0.5s;
    display: none; }
  .map-parent .fullscreen-control:hover {
    background-color: #603ef2; }
  .map-parent .route-panel {
    position: absolute;
    top: 0;
    left: 0;
    padding: 10px;
    background-color: white;
    display: none; }
  .map-parent .route-type-btns {
    display: flex;
     }
    .map-parent .route-type-btns .route-type-btn {
      border-radius: 100%;
      width: 44px;
      height: 44px;
      position: relative;
      margin: 5px;
      transition: 0.5s; }
      .map-parent .route-type-btns .route-type-btn:after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-position: center;
        background-repeat: no-repeat;
        cursor: pointer;
        transition: 0.5s;
        background-size: 25px; }
        .map-parent .route-type-btns .route-type-btn:hover:after, .map-parent .route-type-btns .route-type-btn.active:after {
          filter: grayscale(0) invert(0); }
    .map-parent .route-type-btns .change-to-walking:after {
      filter: grayscale(1) invert(1);
      background-image: url(./img/walking-ic.svg); }
    .map-parent .route-type-btns .change-to-bicycle:after {
      filter: grayscale(1) invert(1);
      background-image: url(./img/bicycle-ic.svg); }
    .map-parent .route-type-btns .change-to-driving:after {
      filter: grayscale(1) invert(1);
      background-image: url(./img/car-ic.svg); }
  .map-parent .get-route-title {
    font-size: 18px;
    }
  .map-parent .map-type {
    color: white;
    position: absolute;
    top: 10px;
    right: 10px;
    border-radius: 33px;
    height: 55px;
    display: flex;
    overflow: hidden; }
    .map-parent .map-type .map-type-toggler {
      display: flex;
      box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.5);
      width: 55px;
      height: 55px;
      background-image: url(./img/satellite-icon.png);
      background-position: center;
      background-size: contain; }
      .map-parent .map-type .map-type-toggler.satellite {
        background-image: url(./img/road-map.png); }
      .map-parent .map-type .map-type-toggler span {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center; }
      .map-parent .map-type .map-type-toggler .const-text {
        padding-left: 25px;
        background-color: #603ef2;
        padding-right: 10px;
        display: none;
        font-size: 0px;
        opacity: 0; }
      .map-parent .map-type .map-type-toggler .var-text {
        padding-left: 25px;
        background-color: rgba(15, 17, 35, 0.9);
        padding-right: 25px;
        cursor: pointer;
        font-size: 0px;
        opacity: 0; }

html[dir="ltr"] .custom-window .si-content {
  direction: ltr; }

html[dir="ltr"] .map-parent .custom-window .custom-close {
  left: initial;
  right: 10px; }

html[dir="ltr"] .map-parent .custom-body .get-route-title {
  padding-left: 0; }

html[dir="ltr"] .map-parent .custom-body .links-btns-wrap .circle-btn.phone-btn {
  padding-right: 0;
  padding-left: 42px; }

html[dir="ltr"] .map-parent .custom-body .links-btns-wrap .circle-btn.map-place {
  padding-right: 0;
  padding-left: 42px; }

html[dir="ltr"] .map-parent .custom-body .links-btns-wrap .circle-btn.phone-btn:after {
  background-position: left 8px center; }

html[dir="ltr"] .map-parent .custom-body .links-btns-wrap .circle-btn.map-place:after {
  background-position: left 8px center; }

html[dir="ltr"] .map-parent .custom-body .get-route-title .bottom-text .row {
  flex-direction: row-reverse; }

body.desktop .map-parent .filter .filter-btn {
  background-color: #1A2F43;
  box-shadow: 1px 1px 10px rgba(26, 47, 67, 0.5); }

body.desktop .map-parent .zoom-control {
  background-color: #1A2F43;
  box-shadow: 1px 1px 10px rgba(26, 47, 67, 0.5); }

body.desktop .map-parent .filter .filters-list .filter-list-btn.active .move-part:after {
  background-color: #1A2F43; }

.map__go-home__btn {
  width: 52px;
  height: 52px;
  position: absolute;
  z-index: 3;
  cursor: pointer; }

.home-btn__img {
  width: 100%;
  height: 100%;
  object-fit: contain; }

.filters-list-wrap {
  z-index: 4; }

/*# sourceMappingURL=exp-map.css.map */

`;


const resetCss = `
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video, input, textarea {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
  box-sizing: border-box;
  outline: none;
}

article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
  display: block;
}
body {
  line-height: 1;
  color: #020020;
}
ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
img {
  max-width: 100%;
  object-fit: scale-down;
  margin: auto;
}

`;

const newStyle =`
.custom-content{
    font-family: 'Ubuntu', sans-serif;
    font-weight: 300;
    color: #03233A;
}
.custom-content__wrapper{
    padding: 16px;
}
.custom-content .custom-header{
    font-weight: 500;
    font-size: 30px;
}
.custom-category{
    display: flex;
}
.custom-route{
    border-top: 1px solid #C0C0C0;
    border-bottom: 1px solid #C0C0C0;
}
.category-title{
    margin-left: 8px;
    font-weight: 300;
    font-size: 16px;
}
.custom-description{
    margin: 12px 0;
}
.custom-description__text{
    font-size: 14px;
    color: #6E767E;
}
.custom-category__img-container{
    width: 16px;
    height: 16px;
}
.custom-category__img{
    width: 100%;
    height: 100%;
    object-fit: contain;
}
.route-wrap{
    display: flex;
    flex-direction: row-reverse;
    justify-content: space-between;
    align-items: center;
}
.route-type-btns{
    flex-direction: row-reverse;
}
.get-route-title{
    width: 50%;
}
.get-route-title .bottom-text{
    display: flex;
    justify-content: space-between;
    flex-direction: row-reverse;
    align-items: center;
    font-weight: 500;
    font-size: 16px;
}
.get-route-title .bottom-text .row {
    display: flex;
    flex-direction: row-reverse;
}
.get-route-title .bottom-text .middle{
    padding-bottom: 7px;
}
.get-route-title .bottom-text .row .number{
    padding-right: 5px;
}
.custom-info{
    font-size: 16px;
    color: #1A2F43;
}
.custom-info .links-btns-wrap .map-place{
    display: flex;
    align-items: flex-end;
    color: inherit;
}
.custom-info .links-btns-wrap{
    display: flex;
    flex-direction: column;
}
.custom-info .links-btns-wrap .map-place:before {
    content:'';
    width: 16px;
    height: 16px;
    display: inline-block;
    background-image: url(./img/new_map_ic_compass.svg);
    background-position: center;
    background-size: 18px;
    margin-right: 9px;
}
.custom-info .links-btns-wrap .phone-btn:before {
    content:'';
    width: 16px;
    height: 16px;
    display: inline-block;
    background-image: url(./img/new_map_ic_call.svg);
    margin-right: 9px;
}
.custom-info .links-btns-wrap .go-to-website:before{
    content:'';
    width: 16px;
    height: 16px;
    display: inline-block;
    background-image: url(./img/new_map_ic_globe.svg);
  background-position: top;
    background-size: 18px;
    margin-right: 9px;
}
.custom-info .links-btns-wrap .go-to-website{
    margin-top: 16px;
    display: flex;
    align-items: flex-end;
}
.custom-info .links-btns-wrap .phone-btn{
    margin: 16px 0;
    display: flex;
    align-items: flex-end;
}
.gmnoprint{
    display: none;
}

`;

const mobileStyle =`
.map-parent .custom-window{
   width: 100%;
   max-width: 100%;
}

.map-parent .custom-window .si-pointer-bg-top{
    display: none;
}
.map-parent.for-app .map-type{
    top: 50%;
}
.map-parent .map-type .map-type-toggler{
    width: 42px;
    height: 42px;
    box-shadow: none;
}
.map-parent .filter .filter-btn{
    bottom: inherit;
    top: -45vh;
    left: 10px;
    width: 42px;
    height: 42px;
    right: auto;
}
.custom-info, .custom-description{
    display: none;
}
.map-parent .custom-window .custom-content .custom-header-wrap.with-img{
    display: none;
}
.custom-close{
    filter: brightness(0);
}
.custom-route{
    border-bottom: none;   
}
.map-parent .custom-window .custom-close{
    top: 0;
    right: 0;
    display: none;
}
.custom-category{
    margin-bottom: 12px;
}
.get-route-title{
    display: none;
}
.map-parent .route-type-btns{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    justify-items: center;
    width: 100%;
}
.time-for-route{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    font-size: 14px;
    justify-items: center;
}
.time-for-route .number{
    margin-right: 4px;
}
.map-parent .route-type-btns .route-type-btn{
    height: 22px;
}
.route-wrap{
    margin-top: 13px;
}
.custom-title:before{
    content: '';
    width: 36px;
    height: 4px;
    background: #C0C0C0;
    display: block;
    border-radius: 8px;
    top: 5px;
    right: 45%;
    position: absolute;
}
.snazzy-card__window{
    position: absolute;
    bottom: 0;
    width: 100%;
}
.map-parent.for-app .custom-window .si-content-wrapper{
    border-radius: 0;
}
.si-wrapper-top{
   -webkit-transform: none;
    transform: none;
}
[class*='si-wrapper']{
    position: initial;
}



`;

const mobileOpenedCard = `
.snazzy-card__window{
    z-index: 3;
}
// .map-parent .custom-window{
//     height: 100vh;
// }
.custom-title:before{
    display: none;
}
.map-parent .custom-window .custom-close{
    top: 10px;
    right: 10px;
    filter: unset;
    display: block;
}
.map-parent .custom-window .custom-content .custom-header-wrap.with-img{
    display: block;
    height: 235px;
}
.custom-info, .custom-description{
    display: block;
}
.custom-route{
    border-bottom: 1px solid #C0C0C0;
}
.custom-info .links-btns-wrap .map-place{
    background: #1A2F43;
    color: #fff;
    width: fit-content;
    padding: 13px 16px 13px 0;
    border-radius: 6px;
    align-self: flex-end;
    display: none;
}
.custom-info .links-btns-wrap .map-place:before{
    width: 24px;
    height: 24px;
    margin-left: 9px;
    filter: brightness(15);
    background-size: unset;
}
.route-wrap{
    margin-top: 5px;
}
.time-for-route{
    margin-bottom: 5px;
}
.custom-info .links-btns-wrap .go-to-website, .custom-info .links-btns-wrap .phone-btn{
    color: #1A2F43;
}

`;